<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meu Controle de Gastos</title>
  <meta name="theme-color" content="#4CAF50" />
  <link rel="manifest" href="application/json;base64,eyJuYW1lIjoiTWV1IENvbnRyb2xlIGRlIEdhc3RvcyIsInNob3J0X25hbWUiOiJDb250cm9sZSIsInN0YXJ0X3VybCI6Ii4vIiwiaWNvbnMiOlt7InNyYyI6ImRhdGE6aW1hZ2UvcG5nO2Jhc2U2NCxpVkJPUncwS0dnb0FBQUFOU1VoRVVnQUFBQTRBQUFBQUFBQkFBRmdBQUFCQWdBRUFBQUFCR0FFQUFZQUFBQUJBQUFCQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQU......Claro! Abaixo estÃ¡ um **site completo, autocontido em um Ãºnico arquivo HTML**, que atende exatamente ao que vocÃª pediu:

- Funciona offline (os dados ficam salvos no seu celular via `localStorage`);
- Tem um **atalho visual atraente** para adicionar Ã  tela inicial;
- Interface simples, amigÃ¡vel e com Ã­cones intuitivos;
- Permite registrar gastos diÃ¡rios por categoria (gasolina, alimentaÃ§Ã£o, boletos, etc.);
- Mostra o **balanÃ§o do dia atual**;
- Concede **medalhas virtuais** por 2 dias seguidos sem gastos;
- Inclui **calendÃ¡rio visual** dos dias com registros;
- Gera **relatÃ³rio em PDF** com histÃ³rico de gastos;
- Tudo salvo localmente â€” **nada vai para a nuvem**.

---

### âœ… Como usar:
1. Copie todo o cÃ³digo abaixo.
2. Salve como um arquivo chamado `meu-controle.html`.
3. Abra esse arquivo no navegador do seu celular (Chrome, Safari, etc.).
4. Adicione Ã  tela inicial:  
   - **Android**: â‹® â†’ "Adicionar Ã  tela inicial"  
   - **iPhone**: Compartilhar â†’ "Adicionar Ã  tela inicial"
5. Pronto! Seus dados ficam sÃ³ no seu aparelho.

---

### ðŸ“„ CÃ³digo do site (Ãºnico arquivo):

```html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Meu Controle de Gastos</title>
  <meta name="theme-color" content="#4CAF50" />
  <link rel="manifest" href="application/json;base64,ewogICJuYW1lIjogIk1ldSBDb250cm9sZSIsCiAgInNob3J0X25hbWUiOiAiQ29udHJvbGUiLAogICJzdGFydF91cmwiOiAiLiIsCiAgImRpc3BsYXkiOiAic3RhbmRhbG9uZSIsCiAgImJhY2tncm91bmRfY29sb3IiOiAiIzQxNjE0NCIsCiAgInRoZW1lX2NvbG9yIjogIiM0Q0FGNTAiLAogICJpY29ucyI6IFt7CiAgICAic3JjIjogImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxOTIiIGhlaWdodD0iMTkyIiB2aWV3Qm94PSIwIDAgMTkyIDE5MiI+PHBhdGggZmlsbD0iIzQ3YTM0YSIgZD0iTTE0NC41IDQ4LjVoLTk2YTE1LjUgMTUuNSAwIDAgMC0xNS41IDE1LjV2NDdhMTUuNSAxNS41IDAgMCAwIDE1LjUgMTUuNWg5NmExNS41IDE1LjUgMCAwIDAgMTUuNS0xNS41di00N2ExNS41IDE1LjUgMCAwIDAtMTUuNS0xNS41ek0xMjggMTI4SDY0di0zMmg2NHYzMnpNNjQgODBoNjR2MTZINjR6Ii8+PC9zdmc+IiwKICAgICJzaXplcyI6ICIxOTJ4MTkyIiwKICAgICJ0eXBlIjogImltYWdlL3N2Zyt4bWwiCiAgfV0KfQo=">
  <style>
    :root {
      --primary: #4CAF50;
      --light: #E8F5E9;
      --dark: #2E7D32;
      --gray: #757575;
      --red: #f44336;
    }
    * { margin: 0; padding: 0; box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
    body {
      background-color: var(--light);
      color: #333;
      padding: 16px;
      max-width: 600px;
      margin: 0 auto;
    }
    header {
      text-align: center;
      margin-bottom: 20px;
      padding: 12px 0;
      color: white;
      background: var(--primary);
      border-radius: 12px;
    }
    h1 { font-size: 1.6rem; }
    .balance { 
      background: white; 
      padding: 12px; 
      border-radius: 12px; 
      margin: 16px 0; 
      text-align: center;
      font-weight: bold;
      color: var(--dark);
    }
    .form-group {
      margin: 12px 0;
    }
    label {
      display: block;
      margin-bottom: 6px;
      font-weight: bold;
    }
    input, select {
      width: 100%;
      padding: 10px;
      border: 1px solid #ccc;
      border-radius: 8px;
      font-size: 1rem;
    }
    button {
      background: var(--primary);
      color: white;
      border: none;
      padding: 12px;
      border-radius: 8px;
      width: 100%;
      font-size: 1.1rem;
      margin-top: 10px;
      cursor: pointer;
    }
    button:hover { background: var(--dark); }
    .history {
      margin-top: 24px;
    }
    .day-entry {
      background: white;
      padding: 12px;
      margin: 8px 0;
      border-radius: 8px;
      border-left: 4px solid var(--primary);
    }
    .medal {
      text-align: center;
      font-size: 1.2rem;
      margin: 16px 0;
      color: gold;
    }
    .calendar {
      display: grid;
      grid-template-columns: repeat(7, 1fr);
      gap: 4px;
      margin: 16px 0;
    }
    .cal-day {
      text-align: center;
      padding: 6px;
      font-size: 0.9rem;
      background: #e0e0e0;
      border-radius: 4px;
    }
    .cal-day.has-data {
      background: var(--primary);
      color: white;
    }
    .cal-day.today {
      border: 2px solid var(--dark);
    }
    @media (prefers-color-scheme: dark) {
      body { background: #121212; color: #e0e0e0; }
      .balance, .day-entry, input, select { background: #1e1e1e; color: white; border-color: #444; }
      .cal-day { background: #333; color: #ddd; }
    }
  </style>
</head>
<body>
  <header>
    <h1>ðŸ’° Meu Controle DiÃ¡rio</h1>
  </header>

  <div class="balance" id="balance">BalanÃ§o de hoje: R$ 0,00</div>

  <div class="form-group">
    <label for="category">Categoria</label>
    <select id="category">
      <option value="gasolina">Gasolina</option>
      <option value="alimentacao">AlimentaÃ§Ã£o</option>
      <option value="feira">Feira</option>
      <option value="uber">Uber/Transporte</option>
      <option value="bares">Bares/Restaurantes</option>
      <option value="padaria">Padaria</option>
      <option value="farmacia">FarmÃ¡cia</option>
      <option value="diversos">Diversos</option>
      <option value="contas">Contas Fixas</option>
      <option value="aluguel">Aluguel</option>
      <option value="cartao">Fatura CartÃ£o</option>
      <option value="energia">Energia</option>
      <option value="telefone">Telefone/Internet</option>
      <option value="impostos">Impostos</option>
      <option value="dizimo">DÃ­zimo/DoaÃ§Ã£o</option>
      <option value="online">Compras Online</option>
    </select>
  </div>

  <div class="form-group">
    <label for="amount">Valor (R$)</label>
    <input type="number" id="amount" step="0.01" placeholder="0,00" min="0">
  </div>

  <button onclick="addExpense()">âž• Registrar Gasto</button>

  <div class="medal" id="medal"></div>

  <div class="calendar" id="calendar"></div>

  <div class="history" id="history"></div>

  <button onclick="generatePDF()" style="background:#2196F3;margin-top:20px;">ðŸ“„ Gerar RelatÃ³rio PDF</button>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script>
    // Carrega dados do localStorage ou inicia vazio
    let expenses = JSON.parse(localStorage.getItem('expenses')) || {};
    const today = new Date().toISOString().split('T')[0];

    function save() {
      localStorage.setItem('expenses', JSON.stringify(expenses));
      render();
    }

    function addExpense() {
      const amount = parseFloat(document.getElementById('amount').value);
      const category = document.getElementById('category').value;
      if (isNaN(amount) || amount <= 0) {
        alert('Digite um valor vÃ¡lido.');
        return;
      }
      if (!expenses[today]) expenses[today] = [];
      expenses[today].push({ amount, category, time: new Date().toLocaleTimeString() });
      save();
      document.getElementById('amount').value = '';
    }

    function formatCurrency(value) {
      return new Intl.NumberFormat('pt-BR', { style: 'currency', currency: 'BRL' }).format(value);
    }

    function getTodayTotal() {
      if (!expenses[today]) return 0;
      return expenses[today].reduce((sum, e) => sum + e.amount, 0);
    }

    function checkMedal() {
      const dates = Object.keys(expenses).sort().reverse();
      const yesterday = new Date();
      yesterday.setDate(yesterday.getDate() - 1);
      const yestStr = yesterday.toISOString().split('T')[0];
      const dayBefore = new Date();
      dayBefore.setDate(dayBefore.getDate() - 2);
      const dayBeforeStr = dayBefore.toISOString().split('T')[0];

      const hasToday = !expenses[today] || expenses[today].length === 0;
      const hasYesterday = !expenses[yestStr] || expenses[yestStr].length === 0;

      if (hasToday && hasYesterday) {
        document.getElementById('medal').innerHTML = 'ðŸ† ParabÃ©ns! 2 dias sem gastos!';
      } else {
        document.getElementById('medal').innerHTML = '';
      }
    }

    function renderCalendar() {
      const now = new Date();
      const year = now.getFullYear();
      const month = now.getMonth();
      const firstDay = new Date(year, month, 1);
      const lastDay = new Date(year, month + 1, 0);
      const startDay = firstDay.getDay(); // 0 = domingo
      const daysInMonth = lastDay.getDate();

      let html = '';
      const weekdays = ['Dom', 'Seg', 'Ter', 'Qua', 'Qui', 'Sex', 'SÃ¡b'];
      weekdays.forEach(d => html += `<div class="cal-day">${d}</div>`);

      // Dias vazios antes do primeiro dia
      for (let i = 0; i < startDay; i++) {
        html += '<div class="cal-day"></div>';
      }

      // Dias do mÃªs
      for (let day = 1; day <= daysInMonth; day++) {
        const dateStr = `${year}-${String(month + 1).padStart(2, '0')}-${String(day).padStart(2, '0')}`;
        const hasData = expenses[dateStr] && expenses[dateStr].length > 0;
        const isToday = dateStr === today;
        let cls = 'cal-day';
        if (hasData) cls += ' has-data';
        if (isToday) cls += ' today';
        html += `<div class="${cls}">${day}</div>`;
      }

      document.getElementById('calendar').innerHTML = html;
    }

    function renderHistory() {
      let html = '<h3>Ãšltimos Registros</h3>';
      const sortedDates = Object.keys(expenses).sort((a, b) => new Date(b) - new Date(a)).slice(0, 10);
      sortedDates.forEach(date => {
        const total = expenses[date].reduce((s, e) => s + e.amount, 0);
        html += `<div class="day-entry"><strong>${date}</strong> â€“ ${formatCurrency(total)}<br>`;
        expenses[date].forEach(e => {
          html += `- ${e.category}: ${formatCurrency(e.amount)} (${e.time})<br>`;
        });
        html += '</div>';
      });
      document.getElementById('history').innerHTML = html;
    }

    function render() {
      document.getElementById('balance').textContent = `BalanÃ§o de hoje: ${formatCurrency(getTodayTotal())}`;
      checkMedal();
      renderCalendar();
      renderHistory();
    }

    async function generatePDF() {
      const { jsPDF } = window.jspdf;
      const doc = new jsPDF();

      doc.setFontSize(20);
      doc.text("RelatÃ³rio de Gastos", 20, 20);
      doc.setFontSize(12);
      let y = 30;

      const sortedDates = Object.keys(expenses).sort((a, b) => new Date(a) - new Date(b));
      sortedDates.forEach(date => {
        const total = expenses[date].reduce((s, e) => s + e.amount, 0);
        doc.text(`${date} â€“ Total: ${formatCurrency(total)}`, 20, y);
        y += 10;
        expenses[date].forEach(e => {
          const line = `- ${e.category}: ${formatCurrency(e.amount)} (${e.time})`;
          if (y > 280) {
            doc.addPage();
            y = 20;
          }
          doc.text(line, 25, y);
          y += 6;
        });
        y += 6;
      });

      doc.save('meu-controle-gastos.pdf');
    }

    // Inicializa
    render();
  </script>
</body>
</html>