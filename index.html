<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Meu Controle Financeiro | Fevereiro 2026</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.28/jspdf.plugin.autotable.min.js"></script>
    <style>
        :root {
            --primary: #4361ee;
            --secondary: #3a0ca3;
            --success: #4cc9f0;
            --warning: #f72585;
            --danger: #e63946;
            --light: #f8f9fa;
            --dark: #212529;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --radius: 12px;
            --ifood: #FF6B6B;
            --uber: #1DD1A1;
            --nubank: #8A05BE;
            --cef: #0060A9;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', system-ui, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--dark);
            min-height: 100vh;
            padding: 20px 15px 100px;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        header {
            text-align: center;
            margin-bottom: 25px;
            padding: 20px;
            background: white;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            position: relative;
        }
        
        .user-profile {
            position: absolute;
            top: 20px;
            right: 20px;
            width: 50px;
            height: 50px;
            background: var(--primary);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 24px;
            font-weight: bold;
            cursor: pointer;
        }
        
        h1 {
            color: var(--secondary);
            margin-bottom: 10px;
            font-size: 1.8rem;
        }
        
        .month-navigator {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-top: 15px;
            background: #f8f9ff;
            padding: 10px;
            border-radius: var(--radius);
        }
        
        .month-btn {
            background: var(--primary);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            font-size: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .current-month {
            font-size: 1.3rem;
            font-weight: bold;
            color: var(--secondary);
            text-align: center;
            flex-grow: 1;
        }
        
        .quick-stats {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .quick-stat {
            background: white;
            padding: 15px;
            border-radius: var(--radius);
            box-shadow: var(--shadow);
            text-align: center;
            font-size: 0.9rem;
        }
        
        .quick-stat .value {
            font-size: 1.5rem;
            font-weight: bold;
            margin: 5px 0;
        }
        
        .daily-mood {
            display: flex;
            justify-content: center;
            gap: 10px;
            margin-top: 15px;
        }
        
        .mood-btn {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            border: none;
            font-size: 20px;
            cursor: pointer;
            background: #f0f0f0;
            transition: all 0.3s;
        }
        
        .mood-btn:hover {
            transform: scale(1.1);
        }
        
        .mood-btn.selected {
            box-shadow: 0 0 0 3px var(--primary);
        }
        
        .tabs {
            display: flex;
            background: white;
            border-radius: var(--radius) var(--radius) 0 0;
            overflow: hidden;
            box-shadow: var(--shadow);
            margin-top: 20px;
            flex-wrap: wrap;
        }
        
        .tab {
            flex: 1;
            min-width: 120px;
            text-align: center;
            padding: 15px 10px;
            background: #f1f3f9;
            border: none;
            font-weight: 600;
            color: var(--dark);
            cursor: pointer;
            transition: all 0.3s;
            white-space: nowrap;
        }
        
        .tab.active {
            background: white;
            color: var(--primary);
            border-bottom: 3px solid var(--primary);
        }
        
        .tab-content {
            display: none;
            background: white;
            padding: 25px;
            border-radius: 0 0 var(--radius) var(--radius);
            box-shadow: var(--shadow);
            margin-bottom: 25px;
        }
        
        .tab-content.active {
            display: block;
        }
        
        .daily-entry {
            background: #f8f9ff;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            border-left: 5px solid var(--primary);
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-bottom: 15px;
        }
        
        .form-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
            color: #555;
        }
        
        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border 0.3s;
        }
        
        input:focus, select:focus, textarea:focus {
            border-color: var(--primary);
            outline: none;
        }
        
        .btn {
            background: var(--primary);
            color: white;
            border: none;
            padding: 14px 25px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            transition: background 0.3s;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
            width: 100%;
            margin-top: 10px;
        }
        
        .btn:hover {
            background: var(--secondary);
        }
        
        .btn-success {
            background: #2ecc71;
        }
        
        .btn-warning {
            background: #f39c12;
        }
        
        .btn-danger {
            background: #e74c3c;
        }
        
        .btn-pdf {
            background: #e74c3c;
        }
        
        .btn-pdf:hover {
            background: #c0392b;
        }
        
        .calendar {
            display: grid;
            grid-template-columns: repeat(7, 1fr);
            gap: 8px;
            margin-top: 20px;
        }
        
        .calendar-day {
            aspect-ratio: 1;
            background: #f8f9ff;
            border-radius: 8px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            position: relative;
            font-size: 0.9rem;
        }
        
        .calendar-day:hover {
            background: #eef2ff;
        }
        
        .calendar-day.today {
            background: var(--primary);
            color: white;
        }
        
        .calendar-day.has-expenses::after {
            content: "";
            position: absolute;
            bottom: 5px;
            width: 6px;
            height: 6px;
            background: var(--warning);
            border-radius: 50%;
        }
        
        .calendar-day.selected {
            box-shadow: 0 0 0 2px var(--primary);
        }
        
        .day-expense {
            font-size: 0.7rem;
            color: #e74c3c;
            margin-top: 2px;
        }
        
        .day-name {
            font-size: 12px;
            color: #777;
            text-align: center;
            margin-bottom: 10px;
            font-weight: bold;
        }
        
        .credit-card {
            background: linear-gradient(135deg, #2c3e50, #4a6491);
            color: white;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
            position: relative;
            overflow: hidden;
        }
        
        .credit-card::before {
            content: "";
            position: absolute;
            top: -50%;
            right: -50%;
            width: 150px;
            height: 150px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 50%;
        }
        
        .card-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 15px;
        }
        
        .card-logo {
            font-size: 24px;
        }
        
        .card-details {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }
        
        .expense-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: #f8f9ff;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid var(--primary);
        }
        
        .expense-category {
            display: inline-block;
            padding: 3px 10px;
            border-radius: 20px;
            font-size: 12px;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .category-ifood {
            background: var(--ifood);
            color: white;
        }
        
        .category-uber {
            background: var(--uber);
            color: white;
        }
        
        .category-nubank {
            background: var(--nubank);
            color: white;
        }
        
        .category-cef {
            background: var(--cef);
            color: white;
        }
        
        .daily-expense-item {
            display: flex;
            justify-content: space-between;
            padding: 12px 15px;
            background: #f8f9ff;
            margin-bottom: 10px;
            border-radius: 8px;
            border-left: 4px solid;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { opacity: 0; transform: translateX(-20px); }
            to { opacity: 1; transform: translateX(0); }
        }
        
        .delete-btn {
            background: transparent;
            border: none;
            color: #e74c3c;
            cursor: pointer;
            font-size: 18px;
        }
        
        .footer-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: white;
            display: flex;
            justify-content: space-around;
            padding: 15px;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.1);
            z-index: 100;
        }
        
        .nav-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-decoration: none;
            color: #777;
            font-size: 12px;
            transition: color 0.3s;
        }
        
        .nav-item.active {
            color: var(--primary);
        }
        
        .nav-item i {
            font-size: 20px;
            margin-bottom: 5px;
        }
        
        .achievement-badge {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            margin: 5px;
            font-size: 24px;
            position: relative;
        }
        
        .badge-gold {
            background: radial-gradient(circle at 30% 30%, #FFD700, #FFA500);
            color: #8B6914;
        }
        
        .badge-silver {
            background: radial-gradient(circle at 30% 30%, #C0C0C0, #A0A0A0);
            color: #606060;
        }
        
        .badge-bronze {
            background: radial-gradient(circle at 30% 30%, #CD7F32, #8B4513);
            color: #5A3300;
        }
        
        .progress-container {
            margin: 20px 0;
        }
        
        .progress-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 5px;
        }
        
        .progress-bar {
            height: 10px;
            background: #eee;
            border-radius: 5px;
            overflow: hidden;
        }
        
        .progress-fill {
            height: 100%;
            border-radius: 5px;
            transition: width 0.5s ease-out;
        }
        
        .ifood-progress {
            background: var(--ifood);
        }
        
        .uber-progress {
            background: var(--uber);
        }
        
        .chart-container {
            height: 200px;
            margin: 20px 0;
            position: relative;
        }
        
        .empty-state {
            text-align: center;
            padding: 40px 20px;
            color: #777;
        }
        
        .empty-state i {
            font-size: 50px;
            margin-bottom: 15px;
            color: #ddd;
        }
        
        .insight-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: var(--radius);
            margin: 20px 0;
            box-shadow: var(--shadow);
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }
        
        .modal-content {
            background: white;
            padding: 30px;
            border-radius: var(--radius);
            width: 90%;
            max-width: 500px;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .pdf-options {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin-top: 20px;
        }
        
        .pdf-option {
            background: #f8f9ff;
            padding: 20px;
            border-radius: var(--radius);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .pdf-option:hover {
            background: #eef2ff;
            transform: translateY(-5px);
        }
        
        .pdf-option i {
            font-size: 40px;
            margin-bottom: 10px;
            color: #e74c3c;
        }
        
        @media (max-width: 600px) {
            .form-row, .card-details, .quick-stats {
                grid-template-columns: 1fr;
            }
            
            .tabs {
                overflow-x: auto;
            }
            
            .tab {
                min-width: 100px;
            }
            
            .pdf-options {
                grid-template-columns: 1fr;
            }
        }
        
        .month-summary {
            background: #f8f9ff;
            padding: 20px;
            border-radius: var(--radius);
            margin-bottom: 20px;
        }
        
        .summary-row {
            display: flex;
            justify-content: space-between;
            padding: 10px 0;
            border-bottom: 1px solid #eee;
        }
        
        .summary-row:last-child {
            border-bottom: none;
            font-weight: bold;
            font-size: 1.2rem;
        }
        
        .streak-counter {
            background: var(--primary);
            color: white;
            padding: 5px 15px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: bold;
            display: inline-flex;
            align-items: center;
            gap: 5px;
            margin-top: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="user-profile" id="user-profile">V</div>
            <h1><i class="fas fa-wallet"></i> Meu Controle Financeiro</h1>
            <p>Controle total dos seus gastos e cart√µes!</p>
            
            <div class="month-navigator">
                <button class="month-btn" id="prev-year">
                    <i class="fas fa-angle-double-left"></i>
                </button>
                <button class="month-btn" id="prev-month">
                    <i class="fas fa-chevron-left"></i>
                </button>
                <div class="current-month" id="current-month">Fevereiro 2026</div>
                <button class="month-btn" id="next-month">
                    <i class="fas fa-chevron-right"></i>
                </button>
                <button class="month-btn" id="next-year">
                    <i class="fas fa-angle-double-right"></i>
                </button>
            </div>
            
            <div class="quick-stats">
                <div class="quick-stat">
                    <div>Renda</div>
                    <div class="value" id="quick-income">R$ 28.000</div>
                </div>
                <div class="quick-stat">
                    <div>Gastos</div>
                    <div class="value" id="quick-expenses">R$ 14.530</div>
                </div>
                <div class="quick-stat">
                    <div>Saldo</div>
                    <div class="value" id="quick-balance">R$ 13.470</div>
                </div>
            </div>
            
            <div class="daily-mood">
                <button class="mood-btn" data-mood="sad">üòû</button>
                <button class="mood-btn" data-mood="neutral">üòê</button>
                <button class="mood-btn" data-mood="happy" id="today-mood">üòä</button>
                <button class="mood-btn" data-mood="excited">üòÅ</button>
            </div>
            
            <div class="streak-counter" id="streak-counter">
                <i class="fas fa-fire"></i> <span id="streak-days">0</span> dias seguidos
            </div>
        </header>
        
        <div class="tabs">
            <button class="tab active" data-tab="dashboard">
                <i class="fas fa-home"></i> Dashboard
            </button>
            <button class="tab" data-tab="daily">
                <i class="fas fa-edit"></i> Registrar
            </button>
            <button class="tab" data-tab="cards">
                <i class="fas fa-credit-card"></i> Cart√µes
            </button>
            <button class="tab" data-tab="expenses">
                <i class="fas fa-list"></i> Despesas
            </button>
            <button class="tab" data-tab="calendar">
                <i class="fas fa-calendar"></i> Calend√°rio
            </button>
            <button class="tab" data-tab="reports">
                <i class="fas fa-chart-bar"></i> Relat√≥rios
            </button>
        </div>
        
        <!-- DASHBOARD TAB -->
        <div id="dashboard-tab" class="tab-content active">
            <div class="insight-card">
                <h3><i class="fas fa-lightbulb"></i> Insight do Dia</h3>
                <p id="daily-insight">Se voc√™ reduzir R$ 20 por dia no iFood, economizar√° R$ 600 por m√™s!</p>
            </div>
            
            <h3><i class="fas fa-trophy"></i> Conquistas</h3>
            <div style="text-align: center; margin: 20px 0;">
                <div class="achievement-badge badge-gold" title="7 dias registrando">
                    <i class="fas fa-calendar-check"></i>
                </div>
                <div class="achievement-badge badge-silver" title="iFood abaixo do limite">
                    <i class="fas fa-utensils"></i>
                </div>
                <div class="achievement-badge badge-bronze" title="Uber abaixo do limite">
                    <i class="fas fa-car"></i>
                </div>
                <div class="achievement-badge" style="background: #ddd; color: #999;" title="Cart√µes quitados">
                    <i class="fas fa-lock"></i>
                </div>
                <div class="achievement-badge" style="background: #ddd; color: #999;" title="30 dias seguidos">
                    <i class="fas fa-lock"></i>
                </div>
            </div>
            
            <h3><i class="fas fa-chart-pie"></i> Limites do M√™s</h3>
            
            <div class="progress-container">
                <div class="progress-label">
                    <span><i class="fas fa-utensils" style="color: var(--ifood);"></i> iFood</span>
                    <span id="ifood-progress-text">R$ 200 / R$ 800</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill ifood-progress" id="ifood-progress" style="width: 25%"></div>
                </div>
            </div>
            
            <div class="progress-container">
                <div class="progress-label">
                    <span><i class="fas fa-car" style="color: var(--uber);"></i> Uber/T√°xi</span>
                    <span id="uber-progress-text">R$ 240 / R$ 600</span>
                </div>
                <div class="progress-bar">
                    <div class="progress-fill uber-progress" id="uber-progress" style="width: 40%"></div>
                </div>
            </div>
            
            <div class="month-summary">
                <h3><i class="fas fa-file-invoice-dollar"></i> Resumo do M√™s</h3>
                <div class="summary-row">
                    <span>Renda Total:</span>
                    <span id="summary-income">R$ 28.000,00</span>
                </div>
                <div class="summary-row">
                    <span>Despesas Fixas:</span>
                    <span id="summary-fixed">R$ 14.530,00</span>
                </div>
                <div class="summary-row">
                    <span>Cart√µes de Cr√©dito:</span>
                    <span id="summary-cards">R$ 3.150,00</span>
                </div>
                <div class="summary-row">
                    <span>Gastos Vari√°veis:</span>
                    <span id="summary-variable">R$ 2.940,00</span>
                </div>
                <div class="summary-row">
                    <span>Saldo Dispon√≠vel:</span>
                    <span id="summary-balance">R$ 7.380,00</span>
                </div>
            </div>
        </div>
        
        <!-- REGISTRAR TAB -->
        <div id="daily-tab" class="tab-content">
            <div class="daily-entry">
                <h3><i class="fas fa-edit"></i> Registrar Gasto Di√°rio</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="expense-date"><i class="fas fa-calendar"></i> Data:</label>
                        <input type="date" id="expense-date" value="2026-02-15">
                    </div>
                    
                    <div class="form-group">
                        <label for="expense-amount"><i class="fas fa-money-bill-wave"></i> Valor (R$):</label>
                        <input type="number" id="expense-amount" placeholder="0,00" step="0.01" min="0">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="expense-category"><i class="fas fa-tag"></i> Categoria:</label>
                    <select id="expense-category">
                        <option value="ifood">üçî iFood / Delivery</option>
                        <option value="uber">üöó Uber / T√°xi / Transporte</option>
                        <option value="supermarket">üõí Supermercado</option>
                        <option value="leisure">üé¨ Lazer / Entretenimento</option>
                        <option value="health">üè• Sa√∫de / Farm√°cia</option>
                        <option value="shopping">üõçÔ∏è Compras / Vestu√°rio</option>
                        <option value="other">üì¶ Outros</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="expense-description"><i class="fas fa-align-left"></i> Descri√ß√£o:</label>
                    <input type="text" id="expense-description" placeholder="Ex: Almo√ßo no restaurante, Uber para trabalho...">
                </div>
                
                <div class="form-group">
                    <label for="payment-method"><i class="fas fa-credit-card"></i> Forma de Pagamento:</label>
                    <select id="payment-method">
                        <option value="nubank">üíú Cart√£o Nubank</option>
                        <option value="cef">üè¶ Cart√£o Caixa</option>
                        <option value="porto">üõ°Ô∏è Cart√£o Porto Seguro</option>
                        <option value="mercado-pago">üõí Mercado Pago</option>
                        <option value="debit">üí≥ D√©bito BB</option>
                        <option value="cash">üíµ Dinheiro</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="expense-note"><i class="fas fa-sticky-note"></i> Observa√ß√£o (opcional):</label>
                    <textarea id="expense-note" rows="2" placeholder="Alguma observa√ß√£o sobre este gasto..."></textarea>
                </div>
                
                <button class="btn btn-success" id="add-expense">
                    <i class="fas fa-plus-circle"></i> Adicionar Gasto
                </button>
                
                <button class="btn" id="quick-ifood">
                    <i class="fas fa-bolt"></i> iFood R√°pido: R$ 45,00
                </button>
                
                <button class="btn" id="quick-uber">
                    <i class="fas fa-bolt"></i> Uber R√°pido: R$ 28,00
                </button>
            </div>
            
            <h3><i class="fas fa-history"></i> Gastos de Hoje</h3>
            <div id="today-expenses">
                <!-- Gastos ser√£o inseridos aqui via JavaScript -->
            </div>
        </div>
        
        <!-- CART√ïES TAB -->
        <div id="cards-tab" class="tab-content">
            <h3><i class="fas fa-credit-card"></i> Controle de Cart√µes</h3>
            
            <div class="credit-card">
                <div class="card-header">
                    <h3><i class="fab fa-cc-mastercard"></i> Nubank</h3>
                    <div class="card-logo" style="color: #8A05BE;">üíú</div>
                </div>
                <div class="card-details">
                    <div class="form-group">
                        <label for="nubank-parcela">Parcela Mensal (R$):</label>
                        <input type="number" id="nubank-parcela" step="0.01" value="1250">
                    </div>
                    <div class="form-group">
                        <label for="nubank-saldo">Saldo Devedor Total (R$):</label>
                        <input type="number" id="nubank-saldo" step="0.01" value="8500">
                    </div>
                </div>
                <div class="form-group">
                    <label for="nubank-vencimento">Data de Vencimento:</label>
                    <input type="date" id="nubank-vencimento" value="2026-02-10">
                </div>
            </div>
            
            <div class="credit-card" style="background: linear-gradient(135deg, #0060a9, #008cba);">
                <div class="card-header">
                    <h3><i class="fas fa-university"></i> Caixa Econ√¥mica</h3>
                    <div class="card-logo">üè¶</div>
                </div>
                <div class="card-details">
                    <div class="form-group">
                        <label for="cef-parcela">Parcela Mensal (R$):</label>
                        <input type="number" id="cef-parcela" step="0.01" value="900">
                    </div>
                    <div class="form-group">
                        <label for="cef-saldo">Saldo Devedor Total (R$):</label>
                        <input type="number" id="cef-saldo" step="0.01" value="6500">
                    </div>
                </div>
                <div class="form-group">
                    <label for="cef-vencimento">Data de Vencimento:</label>
                    <input type="date" id="cef-vencimento" value="2026-02-15">
                </div>
            </div>
            
            <div class="credit-card" style="background: linear-gradient(135deg, #0033a0, #0055cc);">
                <div class="card-header">
                    <h3><i class="fas fa-shield-alt"></i> Porto Seguro</h3>
                    <div class="card-logo">üõ°Ô∏è</div>
                </div>
                <div class="card-details">
                    <div class="form-group">
                        <label for="porto-parcela">Parcela Mensal (R$):</label>
                        <input type="number" id="porto-parcela" step="0.01" value="600">
                    </div>
                    <div class="form-group">
                        <label for="porto-saldo">Saldo Devedor Total (R$):</label>
                        <input type="number" id="porto-saldo" step="0.01" value="3200">
                    </div>
                </div>
                <div class="form-group">
                    <label for="porto-vencimento">Data de Vencimento:</label>
                    <input type="date" id="porto-vencimento" value="2026-02-20">
                </div>
            </div>
            
            <div class="credit-card" style="background: linear-gradient(135deg, #00b4ff, #0095db);">
                <div class="card-header">
                    <h3><i class="fas fa-shopping-cart"></i> Mercado Pago</h3>
                    <div class="card-logo">üõí</div>
                </div>
                <div class="card-details">
                    <div class="form-group">
                        <label for="mercado-parcela">Parcela Mensal (R$):</label>
                        <input type="number" id="mercado-parcela" step="0.01" value="400">
                    </div>
                    <div class="form-group">
                        <label for="mercado-saldo">Saldo Devedor Total (R$):</label>
                        <input type="number" id="mercado-saldo" step="0.01" value="1800">
                    </div>
                </div>
                <div class="form-group">
                    <label for="mercado-vencimento">Data de Vencimento:</label>
                    <input type="date" id="mercado-vencimento" value="2026-02-12">
                </div>
            </div>
            
            <button class="btn btn-success" id="save-cards">
                <i class="fas fa-save"></i> Salvar Altera√ß√µes nos Cart√µes
            </button>
            
            <div style="margin-top: 20px; padding: 15px; background: #f8f9ff; border-radius: var(--radius);">
                <h4><i class="fas fa-calculator"></i> Resumo dos Cart√µes</h4>
                <div class="summary-row">
                    <span>Total de Parcelas Mensais:</span>
                    <span id="total-parcelas">R$ 3.150,00</span>
                </div>
                <div class="summary-row">
                    <span>Saldo Devedor Total:</span>
                    <span id="total-saldo">R$ 20.000,00</span>
                </div>
            </div>
        </div>
        
        <!-- DESPESAS TAB -->
        <div id="expenses-tab" class="tab-content">
            <h3><i class="fas fa-list-alt"></i> Despesas Fixas Mensais</h3>
            
            <div id="fixed-expenses-list">
                <!-- Despesas fixas ser√£o inseridas aqui via JavaScript -->
            </div>
            
            <div style="margin-top: 30px;">
                <h3><i class="fas fa-sliders-h"></i> Configurar Limites</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="ifood-limit">Limite iFood (R$):</label>
                        <input type="number" id="ifood-limit" value="800" step="50">
                    </div>
                    <div class="form-group">
                        <label for="uber-limit">Limite Uber (R$):</label>
                        <input type="number" id="uber-limit" value="600" step="50">
                    </div>
                </div>
                <button class="btn" id="save-limits">
                    <i class="fas fa-save"></i> Salvar Limites
                </button>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: #eef7ff; border-radius: var(--radius);">
                <h4><i class="fas fa-lightbulb"></i> Dica de Economia</h4>
                <p>Com seu saldo dispon√≠vel de <strong>R$ 13.470,00</strong>, voc√™ pode destinar:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li><strong>R$ 8.000</strong> para pagar cart√µes mais r√°pido</li>
                    <li><strong>R$ 3.000</strong> para gastos di√°rios</li>
                    <li><strong>R$ 2.470</strong> para reserva de emerg√™ncia</li>
                </ul>
            </div>
        </div>
        
        <!-- CALEND√ÅRIO TAB -->
        <div id="calendar-tab" class="tab-content">
            <h3><i class="fas fa-calendar-alt"></i> Calend√°rio de Gastos</h3>
            
            <div class="calendar" id="calendar">
                <!-- Calend√°rio ser√° gerado via JavaScript -->
            </div>
            
            <div style="margin-top: 30px;">
                <h3><i class="fas fa-download"></i> Backup dos Dados</h3>
                <div class="form-row">
                    <button class="btn btn-success" id="export-data">
                        <i class="fas fa-file-export"></i> Exportar Dados
                    </button>
                    <button class="btn btn-warning" id="import-data">
                        <i class="fas fa-file-import"></i> Importar Dados
                    </button>
                </div>
                <input type="file" id="import-file" accept=".json" style="display: none;">
                
                <div style="margin-top: 20px; padding: 15px; background: #f8f9ff; border-radius: var(--radius); font-size: 14px;">
                    <p><i class="fas fa-info-circle"></i> <strong>Instru√ß√µes:</strong></p>
                    <ol style="margin-left: 20px; margin-top: 10px;">
                        <li>Adicione esta p√°gina √† tela inicial do seu celular</li>
                        <li>Os dados s√£o salvos automaticamente</li>
                        <li>Fa√ßa backup peri√≥dico para n√£o perder informa√ß√µes</li>
                    </ol>
                </div>
            </div>
        </div>
        
        <!-- RELAT√ìRIOS TAB -->
        <div id="reports-tab" class="tab-content">
            <h3><i class="fas fa-chart-bar"></i> Relat√≥rios e PDFs</h3>
            
            <div class="pdf-options">
                <div class="pdf-option" id="pdf-month">
                    <i class="fas fa-file-pdf"></i>
                    <h4>Relat√≥rio Mensal</h4>
                    <p>Gera PDF completo do m√™s atual</p>
                </div>
                
                <div class="pdf-option" id="pdf-week">
                    <i class="fas fa-file-pdf"></i>
                    <h4>Relat√≥rio Semanal</h4>
                    <p>Gera PDF da semana atual</p>
                </div>
                
                <div class="pdf-option" id="pdf-cards">
                    <i class="fas fa-file-pdf"></i>
                    <h4>Relat√≥rio Cart√µes</h4>
                    <p>Gera PDF com situa√ß√£o dos cart√µes</p>
                </div>
                
                <div class="pdf-option" id="pdf-custom">
                    <i class="fas fa-file-pdf"></i>
                    <h4>Relat√≥rio Personalizado</h4>
                    <p>Escolha o per√≠odo desejado</p>
                </div>
            </div>
            
            <div style="margin-top: 30px; padding: 20px; background: #f8f9ff; border-radius: var(--radius);">
                <h4><i class="fas fa-chart-line"></i> Estat√≠sticas do M√™s</h4>
                <div class="summary-row">
                    <span>Total Gasto no M√™s:</span>
                    <span id="month-total">R$ 0,00</span>
                </div>
                <div class="summary-row">
                    <span>M√©dia Di√°ria:</span>
                    <span id="daily-average">R$ 0,00</span>
                </div>
                <div class="summary-row">
                    <span>Maior Gasto:</span>
                    <span id="biggest-expense">R$ 0,00</span>
                </div>
                <div class="summary-row">
                    <span>Dias com Registro:</span>
                    <span id="days-with-expenses">0/28</span>
                </div>
            </div>
            
            <div style="margin-top: 20px; padding: 15px; background: #fff3cd; border-radius: var(--radius);">
                <h4><i class="fas fa-star"></i> Metas do M√™s</h4>
                <div class="form-group">
                    <label for="month-goal">Meta de Economia (R$):</label>
                    <input type="number" id="month-goal" value="2000" step="100">
                </div>
                <div class="progress-bar" style="margin-top: 10px;">
                    <div class="progress-fill" id="goal-progress" style="width: 0%; background: #ffd700;"></div>
                </div>
                <p style="text-align: center; margin-top: 5px;" id="goal-text">Progresso: 0%</p>
            </div>
        </div>
    </div>
    
    <!-- MODAL PARA RELAT√ìRIO PERSONALIZADO -->
    <div class="modal" id="custom-report-modal">
        <div class="modal-content">
            <h3><i class="fas fa-calendar-alt"></i> Relat√≥rio Personalizado</h3>
            <div class="form-group">
                <label for="report-start">Data Inicial:</label>
                <input type="date" id="report-start" value="2026-02-01">
            </div>
            <div class="form-group">
                <label for="report-end">Data Final:</label>
                <input type="date" id="report-end" value="2026-02-28">
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="include-fixed" checked> Incluir despesas fixas
                </label>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="include-cards" checked> Incluir cart√µes
                </label>
            </div>
            <div class="form-group">
                <label>
                    <input type="checkbox" id="include-daily" checked> Incluir gastos di√°rios
                </label>
            </div>
            <button class="btn btn-pdf" id="generate-custom-pdf">
                <i class="fas fa-file-pdf"></i> Gerar Relat√≥rio
            </button>
            <button class="btn btn-danger" id="close-modal" style="margin-top: 10px;">
                <i class="fas fa-times"></i> Cancelar
            </button>
        </div>
    </div>
    
    <div class="footer-nav">
        <a href="#" class="nav-item active" data-tab="dashboard">
            <i class="fas fa-home"></i>
            <span>In√≠cio</span>
        </a>
        <a href="#" class="nav-item" data-tab="daily">
            <i class="fas fa-plus-circle"></i>
            <span>Registrar</span>
        </a>
        <a href="#" class="nav-item" data-tab="cards">
            <i class="fas fa-credit-card"></i>
            <span>Cart√µes</span>
        </a>
        <a href="#" class="nav-item" data-tab="reports">
            <i class="fas fa-chart-bar"></i>
            <span>Relat√≥rios</span>
        </a>
        <a href="#" class="nav-item" data-tab="calendar">
            <i class="fas fa-cog"></i>
            <span>Config</span>
        </a>
    </div>

    <script>
        // Dados do aplicativo
        const appData = {
            currentYear: 2026,
            currentMonth: 1, // Fevereiro (0 = Janeiro)
            fixedExpenses: [
                { id: 1, name: "Mam√£e", amount: 2800, icon: "fas fa-female", category: "family" },
                { id: 2, name: "Contador", amount: 500, icon: "fas fa-calculator", category: "services" },
                { id: 3, name: "Faculdade da Paola", amount: 2200, icon: "fas fa-graduation-cap", category: "education" },
                { id: 4, name: "Ajuda Aluguel Priscila", amount: 1000, icon: "fas fa-home", category: "family" },
                { id: 5, name: "Cons√≥rcio Im√≥vel CEF", amount: 1900, icon: "fas fa-building", category: "property" },
                { id: 6, name: "Aluguel", amount: 3100, icon: "fas fa-house-user", category: "housing" },
                { id: 7, name: "ANABB e AFABB", amount: 110, icon: "fas fa-handshake", category: "associations" },
                { id: 8, name: "Planos de Previd√™ncia Netos", amount: 400, icon: "fas fa-child", category: "investments" },
                { id: 9, name: "Telefone", amount: 120, icon: "fas fa-phone", category: "utilities" },
                { id: 10, name: "Energia", amount: 150, icon: "fas fa-bolt", category: "utilities" },
                { id: 11, name: "Diarista", amount: 600, icon: "fas fa-broom", category: "services" },
                { id: 12, name: "CASSI", amount: 1500, icon: "fas fa-heartbeat", category: "health" },
                { id: 13, name: "Ourocap", amount: 100, icon: "fas fa-pills", category: "health" },
                { id: 14, name: "Tio Ednaldo", amount: 150, icon: "fas fa-male", category: "family" }
            ],
            creditCards: {
                nubank: { installment: 1250, balance: 8500, dueDate: "2026-02-10", limit: 15000 },
                cef: { installment: 900, balance: 6500, dueDate: "2026-02-15", limit: 12000 },
                porto: { installment: 600, balance: 3200, dueDate: "2026-02-20", limit: 8000 },
                mercado: { installment: 400, balance: 1800, dueDate: "2026-02-12", limit: 5000 }
            },
            dailyExpenses: [],
            limits: {
                ifood: 800,
                uber: 600
            },
            achievements: {
                streak7: false,
                ifoodLimit: false,
                uberLimit: false,
                streak30: false,
                cardsPaid: false,
                monthlyGoal: false
            },
            moodHistory: {},
            monthlyGoal: 2000,
            streakDays: 0,
            lastAccessDate: null
        };
        
        // Carregar dados do localStorage
        function loadData() {
            const savedData = localStorage.getItem("financeControlData");
            if (savedData) {
                const parsedData = JSON.parse(savedData);
                Object.assign(appData, parsedData);
            }
            
            // Verificar streak (sequ√™ncia de dias)
            checkStreak();
            
            updateUI();
        }
        
        // Salvar dados no localStorage
        function saveData() {
            localStorage.setItem("financeControlData", JSON.stringify(appData));
            showNotification("Dados salvos com sucesso!");
        }
        
        // Verificar sequ√™ncia de dias de acesso
        function checkStreak() {
            const today = new Date().toISOString().split('T')[0];
            
            if (!appData.lastAccessDate) {
                appData.streakDays = 1;
            } else {
                const lastDate = new Date(appData.lastAccessDate);
                const currentDate = new Date(today);
                const diffTime = Math.abs(currentDate - lastDate);
                const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
                
                if (diffDays === 1) {
                    appData.streakDays++;
                } else if (diffDays > 1) {
                    appData.streakDays = 1;
                }
            }
            
            appData.lastAccessDate = today;
            saveData();
        }
        
        // Atualizar toda a interface
        function updateUI() {
            updateMonthDisplay();
            updateFixedExpenses();
            updateCreditCards();
            updateDailyExpenses();
            updateCalendar();
            updateStats();
            updateLimitsDisplay();
            updateAchievements();
            updateStreakDisplay();
            generateInsight();
        }
        
        // Atualizar display do m√™s
        function updateMonthDisplay() {
            const monthNames = [
                "Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho",
                "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
            ];
            
            const monthName = monthNames[appData.currentMonth];
            document.getElementById("current-month").textContent = `${monthName} ${appData.currentYear}`;
            
            // Atualizar data no formul√°rio se for o m√™s atual
            const today = new Date();
            if (today.getFullYear() === appData.currentYear && today.getMonth() === appData.currentMonth) {
                const todayStr = today.toISOString().split('T')[0];
                document.getElementById("expense-date").value = todayStr;
            } else {
                // Primeiro dia do m√™s selecionado
                const firstDay = `${appData.currentYear}-${(appData.currentMonth + 1).toString().padStart(2, '0')}-01`;
                document.getElementById("expense-date").value = firstDay;
            }
        }
        
        // Atualizar despesas fixas
        function updateFixedExpenses() {
            const container = document.getElementById("fixed-expenses-list");
            container.innerHTML = "";
            
            let total = 0;
            
            appData.fixedExpenses.forEach(expense => {
                total += expense.amount;
                
                const item = document.createElement("div");
                item.className = "expense-item";
                item.innerHTML = `
                    <div>
                        <i class="${expense.icon}"></i>
                        <span class="expense-category category-${expense.category}">${expense.category}</span>
                        ${expense.name}
                    </div>
                    <div class="expense-amount">R$ ${expense.amount.toFixed(2)}</div>
                `;
                
                container.appendChild(item);
            });
            
            document.getElementById("summary-fixed").textContent = `R$ ${total.toFixed(2)}`;
        }
        
        // Atualizar cart√µes
        function updateCreditCards() {
            // Nubank
            document.getElementById("nubank-parcela").value = appData.creditCards.nubank.installment;
            document.getElementById("nubank-saldo").value = appData.creditCards.nubank.balance;
            document.getElementById("nubank-vencimento").value = appData.creditCards.nubank.dueDate;
            
            // CEF
            document.getElementById("cef-parcela").value = appData.creditCards.cef.installment;
            document.getElementById("cef-saldo").value = appData.creditCards.cef.balance;
            document.getElementById("cef-vencimento").value = appData.creditCards.cef.dueDate;
            
            // Porto
            document.getElementById("porto-parcela").value = appData.creditCards.porto.installment;
            document.getElementById("porto-saldo").value = appData.creditCards.porto.balance;
            document.getElementById("porto-vencimento").value = appData.creditCards.porto.dueDate;
            
            // Mercado Pago
            document.getElementById("mercado-parcela").value = appData.creditCards.mercado.installment;
            document.getElementById("mercado-saldo").value = appData.creditCards.mercado.balance;
            document.getElementById("mercado-vencimento").value = appData.creditCards.mercado.dueDate;
            
            // Calcular totais
            let totalInstallments = 0;
            let totalBalance = 0;
            
            for (const card in appData.creditCards) {
                totalInstallments += appData.creditCards[card].installment;
                totalBalance += appData.creditCards[card].balance;
            }
            
            document.getElementById("total-parcelas").textContent = `R$ ${totalInstallments.toFixed(2)}`;
            document.getElementById("total-saldo").textContent = `R$ ${totalBalance.toFixed(2)}`;
            document.getElementById("summary-cards").textContent = `R$ ${totalInstallments.toFixed(2)}`;
        }
        
        // Atualizar despesas di√°rias
        function updateDailyExpenses() {
            const selectedDate = document.getElementById("expense-date").value;
            const expensesForDate = appData.dailyExpenses.filter(expense => expense.date === selectedDate);
            const container = document.getElementById("today-expenses");
            
            container.innerHTML = "";
            
            if (expensesForDate.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <i class="fas fa-receipt"></i>
                        <p>Nenhum gasto registrado para esta data.</p>
                    </div>
                `;
                return;
            }
            
            expensesForDate.forEach(expense => {
                const item = document.createElement("div");
                item.className = "daily-expense-item";
                
                const categoryIcons = {
                    "ifood": "üçî",
                    "uber": "üöó",
                    "supermarket": "üõí",
                    "leisure": "üé¨",
                    "health": "üè•",
                    "shopping": "üõçÔ∏è",
                    "other": "üì¶"
                };
                
                const categoryNames = {
                    "ifood": "iFood",
                    "uber": "Uber",
                    "supermarket": "Supermercado",
                    "leisure": "Lazer",
                    "health": "Sa√∫de",
                    "shopping": "Compras",
                    "other": "Outros"
                };
                
                const paymentIcons = {
                    "nubank": "üíú",
                    "cef": "üè¶",
                    "porto": "üõ°Ô∏è",
                    "mercado-pago": "üõí",
                    "debit": "üí≥",
                    "cash": "üíµ"
                };
                
                item.innerHTML = `
                    <div>
                        <strong>${categoryIcons[expense.category]} ${expense.description}</strong>
                        <div style="font-size: 12px; color: #666; margin-top: 5px;">
                            ${categoryNames[expense.category]} ‚Ä¢ ${paymentIcons[expense.paymentMethod]}
                            ${expense.note ? `<br><em>${expense.note}</em>` : ''}
                        </div>
                    </div>
                    <div style="display: flex; align-items: center; gap: 15px;">
                        <strong style="color: #e74c3c;">R$ ${expense.amount.toFixed(2)}</strong>
                        <button class="delete-btn" data-id="${expense.id}">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                
                container.appendChild(item);
            });
            
            // Event listeners para excluir
            document.querySelectorAll(".delete-btn").forEach(button => {
                button.addEventListener("click", function() {
                    const id = this.getAttribute("data-id");
                    deleteExpense(id);
                });
            });
        }
        
        // Atualizar calend√°rio
        function updateCalendar() {
            const container = document.getElementById("calendar");
            container.innerHTML = "";
            
            // Dias da semana
            const daysOfWeek = ["Dom", "Seg", "Ter", "Qua", "Qui", "Sex", "S√°b"];
            daysOfWeek.forEach(day => {
                const dayElement = document.createElement("div");
                dayElement.className = "day-name";
                dayElement.textContent = day;
                container.appendChild(dayElement);
            });
            
            // Primeiro dia do m√™s
            const firstDay = new Date(appData.currentYear, appData.currentMonth, 1);
            const startingDay = firstDay.getDay();
            
            // Dias no m√™s
            const daysInMonth = new Date(appData.currentYear, appData.currentMonth + 1, 0).getDate();
            
            // Dias vazios antes do primeiro dia
            for (let i = 0; i < startingDay; i++) {
                const emptyDay = document.createElement("div");
                emptyDay.className = "calendar-day";
                emptyDay.style.visibility = "hidden";
                container.appendChild(emptyDay);
            }
            
            // Dias do m√™s
            const today = new Date();
            const currentDate = today.getDate();
            const currentMonth = today.getMonth();
            const currentYear = today.getFullYear();
            
            for (let day = 1; day <= daysInMonth; day++) {
                const dayElement = document.createElement("div");
                dayElement.className = "calendar-day";
                dayElement.textContent = day;
                
                // Verificar se √© hoje
                if (day === currentDate && 
                    appData.currentMonth === currentMonth && 
                    appData.currentYear === currentYear) {
                    dayElement.classList.add("today");
                }
                
                // Verificar se h√° despesas neste dia
                const dateStr = `${appData.currentYear}-${(appData.currentMonth + 1).toString().padStart(2, '0')}-${day.toString().padStart(2, '0')}`;
                const dayExpenses = appData.dailyExpenses.filter(expense => expense.date === dateStr);
                
                if (dayExpenses.length > 0) {
                    dayElement.classList.add("has-expenses");
                    
                    // Calcular total do dia
                    const dayTotal = dayExpenses.reduce((sum, expense) => sum + expense.amount, 0);
                    const totalElement = document.createElement("div");
                    totalElement.className = "day-expense";
                    totalElement.textContent = `R$ ${dayTotal.toFixed(0)}`;
                    dayElement.appendChild(totalElement);
                }
                
                // Evento de clique
                dayElement.addEventListener("click", function() {
                    document.querySelectorAll(".calendar-day").forEach(d => d.classList.remove("selected"));
                    this.classList.add("selected");
                    
                    document.getElementById("expense-date").value = dateStr;
                    updateDailyExpenses();
                    
                    // Mudar para a aba de registro
                    switchTab('daily');
                });
                
                container.appendChild(dayElement);
            }
        }
        
        // Atualizar estat√≠sticas
        function updateStats() {
            // Despesas fixas
            const fixedTotal = appData.fixedExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            
            // Parcelas dos cart√µes
            let cardsTotal = 0;
            for (const card in appData.creditCards) {
                cardsTotal += appData.creditCards[card].installment;
            }
            
            // Gastos do m√™s atual
            const currentMonthExpenses = getCurrentMonthExpenses();
            const variableTotal = currentMonthExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            
            // Totais
            const income = 28000;
            const totalExpenses = fixedTotal + cardsTotal + variableTotal;
            const balance = income - totalExpenses;
            
            // Atualizar valores r√°pidos
            document.getElementById("quick-income").textContent = `R$ ${income.toLocaleString('pt-BR')}`;
            document.getElementById("quick-expenses").textContent = `R$ ${fixedTotal.toLocaleString('pt-BR')}`;
            document.getElementById("quick-balance").textContent = `R$ ${balance.toLocaleString('pt-BR')}`;
            
            // Atualizar resumo
            document.getElementById("summary-income").textContent = `R$ ${income.toFixed(2)}`;
            document.getElementById("summary-variable").textContent = `R$ ${variableTotal.toFixed(2)}`;
            document.getElementById("summary-balance").textContent = `R$ ${balance.toFixed(2)}`;
            
            // Estat√≠sticas do m√™s
            document.getElementById("month-total").textContent = `R$ ${(fixedTotal + variableTotal).toFixed(2)}`;
            
            const daysWithExpenses = new Set(currentMonthExpenses.map(e => e.date)).size;
            const daysInMonth = new Date(appData.currentYear, appData.currentMonth + 1, 0).getDate();
            document.getElementById("days-with-expenses").textContent = `${daysWithExpenses}/${daysInMonth}`;
            
            if (currentMonthExpenses.length > 0) {
                const dailyAverage = variableTotal / daysWithExpenses;
                const biggestExpense = Math.max(...currentMonthExpenses.map(e => e.amount));
                
                document.getElementById("daily-average").textContent = `R$ ${dailyAverage.toFixed(2)}`;
                document.getElementById("biggest-expense").textContent = `R$ ${biggestExpense.toFixed(2)}`;
            }
            
            // Progresso da meta
            const goalProgress = Math.min((variableTotal / appData.monthlyGoal) * 100, 100);
            document.getElementById("goal-progress").style.width = `${goalProgress}%`;
            document.getElementById("goal-text").textContent = `Progresso: ${goalProgress.toFixed(1)}%`;
        }
        
        // Atualizar display de limites
        function updateLimitsDisplay() {
            document.getElementById("ifood-limit").value = appData.limits.ifood;
            document.getElementById("uber-limit").value = appData.limits.uber;
            
            // Calcular gastos do m√™s
            const currentMonthExpenses = getCurrentMonthExpenses();
            const ifoodSpent = currentMonthExpenses
                .filter(expense => expense.category === "ifood")
                .reduce((sum, expense) => sum + expense.amount, 0);
            
            const uberSpent = currentMonthExpenses
                .filter(expense => expense.category === "uber")
                .reduce((sum, expense) => sum + expense.amount, 0);
            
            // Atualizar progresso
            const ifoodProgress = (ifoodSpent / appData.limits.ifood) * 100;
            const uberProgress = (uberSpent / appData.limits.uber) * 100;
            
            document.getElementById("ifood-progress").style.width = `${Math.min(ifoodProgress, 100)}%`;
            document.getElementById("uber-progress").style.width = `${Math.min(uberProgress, 100)}%`;
            
            document.getElementById("ifood-progress-text").textContent = `R$ ${ifoodSpent.toFixed(2)} / R$ ${appData.limits.ifood.toFixed(2)}`;
            document.getElementById("uber-progress-text").textContent = `R$ ${uberSpent.toFixed(2)} / R$ ${appData.limits.uber.toFixed(2)}`;
            
            // Atualizar conquistas
            appData.achievements.ifoodLimit = ifoodSpent <= appData.limits.ifood;
            appData.achievements.uberLimit = uberSpent <= appData.limits.uber;
        }
        
        // Atualizar conquistas
        function updateAchievements() {
            // Verificar conquistas baseadas em streak
            if (appData.streakDays >= 7) appData.achievements.streak7 = true;
            if (appData.streakDays >= 30) appData.achievements.streak30 = true;
            
            // Verificar se cart√µes est√£o quitados
            const totalBalance = Object.values(appData.creditCards).reduce((sum, card) => sum + card.balance, 0);
            appData.achievements.cardsPaid = totalBalance === 0;
            
            // Atualizar √≠cones das conquistas
            const badges = document.querySelectorAll('.achievement-badge');
            badges[0].className = appData.achievements.streak7 ? 
                "achievement-badge badge-gold" : "achievement-badge";
            badges[1].className = appData.achievements.ifoodLimit ? 
                "achievement-badge badge-silver" : "achievement-badge";
            badges[2].className = appData.achievements.uberLimit ? 
                "achievement-badge badge-bronze" : "achievement-badge";
            badges[3].className = appData.achievements.cardsPaid ? 
                "achievement-badge badge-gold" : "achievement-badge";
            badges[4].className = appData.achievements.streak30 ? 
                "achievement-badge badge-gold" : "achievement-badge";
        }
        
        // Atualizar display do streak
        function updateStreakDisplay() {
            document.getElementById("streak-days").textContent = appData.streakDays;
            document.getElementById("streak-counter").style.display = appData.streakDays > 0 ? "inline-flex" : "none";
        }
        
        // Gerar insight do dia
        function generateInsight() {
            const insights = [
                "Reduzindo R$ 20 por dia no iFood, voc√™ economiza R$ 600 por m√™s!",
                "Pagar mais que o m√≠nimo dos cart√µes reduz drasticamente os juros.",
                "Seu saldo dispon√≠vel √© maior que 90% dos brasileiros. Parab√©ns!",
                "Invista pelo menos 10% do seu saldo dispon√≠vel para o futuro.",
                "Comparar pre√ßos antes de comprar pode economizar at√© 30%.",
                "Cozinhar em casa 3x por semana reduz R$ 400/m√™s no delivery.",
                "Seu controle financeiro hoje garante sua liberdade amanh√£!",
                "Metas claras + disciplina = Sucesso financeiro garantido!"
            ];
            
            const randomInsight = insights[Math.floor(Math.random() * insights.length)];
            document.getElementById("daily-insight").textContent = randomInsight;
        }
        
        // Obter despesas do m√™s atual
        function getCurrentMonthExpenses() {
            const year = appData.currentYear;
            const month = (appData.currentMonth + 1).toString().padStart(2, '0');
            const prefix = `${year}-${month}`;
            return appData.dailyExpenses.filter(expense => expense.date.startsWith(prefix));
        }
        
        // Adicionar nova despesa
        function addExpense() {
            const date = document.getElementById("expense-date").value;
            const category = document.getElementById("expense-category").value;
            const description = document.getElementById("expense-description").value;
            const amount = parseFloat(document.getElementById("expense-amount").value);
            const paymentMethod = document.getElementById("payment-method").value;
            const note = document.getElementById("expense-note").value;
            
            if (!description || !amount || amount <= 0) {
                showNotification("Por favor, preencha todos os campos corretamente!", "error");
                return;
            }
            
            const newExpense = {
                id: Date.now(),
                date,
                category,
                description,
                amount,
                paymentMethod,
                note
            };
            
            appData.dailyExpenses.push(newExpense);
            
            // Limpar formul√°rio
            document.getElementById("expense-description").value = "";
            document.getElementById("expense-amount").value = "";
            document.getElementById("expense-note").value = "";
            
            // Atualizar UI e salvar
            updateDailyExpenses();
            updateCalendar();
            updateStats();
            updateLimitsDisplay();
            saveData();
            
            showNotification("Gasto adicionado com sucesso! üí∞");
            
            // Efeito visual
            const addButton = document.getElementById("add-expense");
            addButton.innerHTML = '<i class="fas fa-check"></i> Adicionado!';
            addButton.style.background = "#2ecc71";
            setTimeout(() => {
                addButton.innerHTML = '<i class="fas fa-plus-circle"></i> Adicionar Gasto';
                addButton.style.background = "";
            }, 1000);
        }
        
        // Excluir despesa
        function deleteExpense(id) {
            if (confirm("Tem certeza que deseja excluir este gasto?")) {
                appData.dailyExpenses = appData.dailyExpenses.filter(expense => expense.id !== id);
                updateDailyExpenses();
                updateCalendar();
                updateStats();
                updateLimitsDisplay();
                saveData();
                showNotification("Gasto exclu√≠do com sucesso!");
            }
        }
        
        // Salvar cart√µes
        function saveCreditCards() {
            appData.creditCards.nubank.installment = parseFloat(document.getElementById("nubank-parcela").value) || 0;
            appData.creditCards.nubank.balance = parseFloat(document.getElementById("nubank-saldo").value) || 0;
            appData.creditCards.nubank.dueDate = document.getElementById("nubank-vencimento").value;
            
            appData.creditCards.cef.installment = parseFloat(document.getElementById("cef-parcela").value) || 0;
            appData.creditCards.cef.balance = parseFloat(document.getElementById("cef-saldo").value) || 0;
            appData.creditCards.cef.dueDate = document.getElementById("cef-vencimento").value;
            
            appData.creditCards.porto.installment = parseFloat(document.getElementById("porto-parcela").value) || 0;
            appData.creditCards.porto.balance = parseFloat(document.getElementById("porto-saldo").value) || 0;
            appData.creditCards.porto.dueDate = document.getElementById("porto-vencimento").value;
            
            appData.creditCards.mercado.installment = parseFloat(document.getElementById("mercado-parcela").value) || 0;
            appData.creditCards.mercado.balance = parseFloat(document.getElementById("mercado-saldo").value) || 0;
            appData.creditCards.mercado.dueDate = document.getElementById("mercado-vencimento").value;
            
            updateCreditCards();
            updateAchievements();
            saveData();
            showNotification("Cart√µes atualizados com sucesso! üí≥");
        }
        
        // Salvar limites
        function saveLimits() {
            appData.limits.ifood = parseFloat(document.getElementById("ifood-limit").value) || 0;
            appData.limits.uber = parseFloat(document.getElementById("uber-limit").value) || 0;
            
            updateLimitsDisplay();
            saveData();
            showNotification("Limites atualizados com sucesso! üéØ");
        }
        
        // Navegar entre meses
        function navigateMonth(direction) {
            if (direction === 'prev') {
                appData.currentMonth--;
                if (appData.currentMonth < 0) {
                    appData.currentMonth = 11;
                    appData.currentYear--;
                }
            } else if (direction === 'next') {
                appData.currentMonth++;
                if (appData.currentMonth > 11) {
                    appData.currentMonth = 0;
                    appData.currentYear++;
                }
            } else if (direction === 'prev-year') {
                appData.currentYear--;
            } else if (direction === 'next-year') {
                appData.currentYear++;
            }
            
            updateUI();
            saveData();
        }
        
        // Mudar aba
        function switchTab(tabName) {
            document.querySelectorAll(".tab, .nav-item").forEach(el => el.classList.remove("active"));
            document.querySelectorAll(".tab-content").forEach(el => el.classList.remove("active"));
            
            document.querySelector(`[data-tab="${tabName}"]`).classList.add("active");
            document.querySelector(`#${tabName}-tab`).classList.add("active");
        }
        
        // Mostrar notifica√ß√£o
        function showNotification(message, type = "success") {
            const notification = document.createElement("div");
            notification.textContent = message;
            notification.style.cssText = `
                position: fixed;
                top: 20px;
                right: 20px;
                background: ${type === "error" ? "#e74c3c" : "#2ecc71"};
                color: white;
                padding: 15px 25px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1000;
                font-weight: 600;
                animation: slideIn 0.3s ease-out;
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = "slideOut 0.3s ease-out";
                setTimeout(() => {
                    document.body.removeChild(notification);
                }, 300);
            }, 3000);
        }
        
        // Gerar PDF do m√™s
        function generateMonthPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const monthNames = [
                "Janeiro", "Fevereiro", "Mar√ßo", "Abril", "Maio", "Junho",
                "Julho", "Agosto", "Setembro", "Outubro", "Novembro", "Dezembro"
            ];
            
            const monthName = monthNames[appData.currentMonth];
            const title = `Relat√≥rio Financeiro - ${monthName} ${appData.currentYear}`;
            
            // T√≠tulo
            doc.setFontSize(20);
            doc.text(title, 105, 20, { align: 'center' });
            
            // Informa√ß√µes do usu√°rio
            doc.setFontSize(12);
            doc.text(`Gerado em: ${new Date().toLocaleDateString('pt-BR')}`, 20, 35);
            doc.text(`Usu√°rio: Voc√™`, 20, 42);
            
            // Despesas fixas
            doc.setFontSize(16);
            doc.text("Despesas Fixas", 20, 60);
            
            let yPos = 70;
            let fixedTotal = 0;
            
            appData.fixedExpenses.forEach(expense => {
                doc.setFontSize(12);
                doc.text(`${expense.name}:`, 30, yPos);
                doc.text(`R$ ${expense.amount.toFixed(2)}`, 180, yPos, { align: 'right' });
                fixedTotal += expense.amount;
                yPos += 7;
            });
            
            doc.setFontSize(12);
            doc.text("Total Despesas Fixas:", 30, yPos);
            doc.text(`R$ ${fixedTotal.toFixed(2)}`, 180, yPos, { align: 'right' });
            yPos += 15;
            
            // Cart√µes de cr√©dito
            if (yPos > 250) {
                doc.addPage();
                yPos = 20;
            }
            
            doc.setFontSize(16);
            doc.text("Cart√µes de Cr√©dito", 20, yPos);
            yPos += 10;
            
            let cardsTotal = 0;
            let cardsBalance = 0;
            
            for (const [cardName, card] of Object.entries(appData.creditCards)) {
                doc.setFontSize(12);
                doc.text(`${cardName.toUpperCase()}:`, 30, yPos);
                doc.text(`Parcela: R$ ${card.installment.toFixed(2)} | Saldo: R$ ${card.balance.toFixed(2)}`, 180, yPos, { align: 'right' });
                cardsTotal += card.installment;
                cardsBalance += card.balance;
                yPos += 7;
            }
            
            doc.text("Total Parcelas:", 30, yPos);
            doc.text(`R$ ${cardsTotal.toFixed(2)}`, 180, yPos, { align: 'right' });
            yPos += 7;
            
            doc.text("Total Saldo Devedor:", 30, yPos);
            doc.text(`R$ ${cardsBalance.toFixed(2)}`, 180, yPos, { align: 'right' });
            yPos += 15;
            
            // Gastos di√°rios do m√™s
            if (yPos > 250) {
                doc.addPage();
                yPos = 20;
            }
            
            const monthExpenses = getCurrentMonthExpenses();
            if (monthExpenses.length > 0) {
                doc.setFontSize(16);
                doc.text("Gastos Di√°rios do M√™s", 20, yPos);
                yPos += 10;
                
                // Agrupar por categoria
                const categories = {};
                monthExpenses.forEach(expense => {
                    if (!categories[expense.category]) {
                        categories[expense.category] = 0;
                    }
                    categories[expense.category] += expense.amount;
                });
                
                for (const [category, total] of Object.entries(categories)) {
                    const categoryNames = {
                        "ifood": "iFood/Delivery",
                        "uber": "Uber/Transporte",
                        "supermarket": "Supermercado",
                        "leisure": "Lazer",
                        "health": "Sa√∫de",
                        "shopping": "Compras",
                        "other": "Outros"
                    };
                    
                    doc.setFontSize(12);
                    doc.text(`${categoryNames[category] || category}:`, 30, yPos);
                    doc.text(`R$ ${total.toFixed(2)}`, 180, yPos, { align: 'right' });
                    yPos += 7;
                }
                
                const variableTotal = monthExpenses.reduce((sum, e) => sum + e.amount, 0);
                doc.setFontSize(12);
                doc.text("Total Gastos Vari√°veis:", 30, yPos);
                doc.text(`R$ ${variableTotal.toFixed(2)}`, 180, yPos, { align: 'right' });
                yPos += 10;
            }
            
            // Resumo final
            if (yPos > 250) {
                doc.addPage();
                yPos = 20;
            }
            
            doc.setFontSize(16);
            doc.text("Resumo Financeiro", 20, yPos);
            yPos += 10;
            
            const income = 28000;
            const variableTotal = monthExpenses.reduce((sum, e) => sum + e.amount, 0);
            const totalExpenses = fixedTotal + cardsTotal + variableTotal;
            const balance = income - totalExpenses;
            
            doc.setFontSize(12);
            doc.text("Renda Total:", 30, yPos);
            doc.text(`R$ ${income.toFixed(2)}`, 180, yPos, { align: 'right' });
            yPos += 7;
            
            doc.text("Total de Despesas:", 30, yPos);
            doc.text(`R$ ${totalExpenses.toFixed(2)}`, 180, yPos, { align: 'right' });
            yPos += 7;
            
            doc.setFontSize(14);
            doc.setTextColor(0, 100, 0);
            doc.text("Saldo Dispon√≠vel:", 30, yPos);
            doc.text(`R$ ${balance.toFixed(2)}`, 180, yPos, { align: 'right' });
            
            // Salvar PDF
            const fileName = `relatorio-${monthName.toLowerCase()}-${appData.currentYear}.pdf`;
            doc.save(fileName);
            
            showNotification("PDF gerado com sucesso! üìÑ");
        }
        
        // Gerar PDF da semana
        function generateWeekPDF() {
            const { jsPDF } = window.jspdf;
            const doc = new jsPDF();
            
            const today = new Date();
            const startOfWeek = new Date(today);
            startOfWeek.setDate(today.getDate() - today.getDay());
            
            const weekDates = [];
            for (let i = 0; i < 7; i++) {
                const date = new Date(startOfWeek);
                date.setDate(startOfWeek.getDate() + i);
                weekDates.push(date.toISOString().split('T')[0]);
            }
            
            const weekExpenses = appData.dailyExpenses.filter(expense => 
                weekDates.includes(expense.date)
            );
            
            // T√≠tulo
            doc.setFontSize(20);
            doc.text("Relat√≥rio Semanal", 105, 20, { align: 'center' });
            
            doc.setFontSize(12);
            doc.text(`Per√≠odo: ${weekDates[0]} a ${weekDates[6]}`, 105, 30, { align: 'center' });
            
            let yPos = 50;
            
            // Gastos por dia
            weekDates.forEach(date => {
                const dayExpenses = weekExpenses.filter(expense => expense.date === date);
                if (dayExpenses.length > 0) {
                    const dayTotal = dayExpenses.reduce((sum, expense) => sum + expense.amount, 0);
                    
                    doc.setFontSize(14);
                    doc.text(`Dia ${date}: R$ ${dayTotal.toFixed(2)}`, 20, yPos);
                    yPos += 7;
                    
                    dayExpenses.forEach(expense => {
                        doc.setFontSize(10);
                        doc.text(`  ‚Ä¢ ${expense.description}: R$ ${expense.amount.toFixed(2)}`, 25, yPos);
                        yPos += 5;
                    });
                    yPos += 5;
                }
            });
            
            // Total da semana
            const weekTotal = weekExpenses.reduce((sum, expense) => sum + expense.amount, 0);
            doc.setFontSize(16);
            doc.text(`Total da Semana: R$ ${weekTotal.toFixed(2)}`, 20, yPos + 10);
            
            // Salvar PDF
            const fileName = `relatorio-semanal-${weekDates[0]}.pdf`;
            doc.save(fileName);
            
            showNotification("PDF semanal gerado com sucesso! üìÖ");
        }
        
        // Exportar dados
        function exportData() {
            const dataStr = JSON.stringify(appData, null, 2);
            const dataUri = 'data:application/json;charset=utf-8,'+ encodeURIComponent(dataStr);
            
            const exportFileDefaultName = `backup-financeiro-${new Date().toISOString().slice(0,10)}.json`;
            
            const linkElement = document.createElement('a');
            linkElement.setAttribute('href', dataUri);
            linkElement.setAttribute('download', exportFileDefaultName);
            linkElement.click();
            
            showNotification("Dados exportados com sucesso! üíæ");
        }
        
        // Importar dados
        function importData() {
            document.getElementById("import-file").click();
        }
        
        // Inicializar aplicativo
        function initApp() {
            loadData();
            
            // Configurar data inicial para fevereiro/2026
            const today = new Date();
            if (today.getFullYear() === 2026 && today.getMonth() === 1) {
                // J√° √© fevereiro de 2026
            } else {
                // For√ßar fevereiro de 2026
                appData.currentYear = 2026;
                appData.currentMonth = 1;
                saveData();
            }
            
            // Event Listeners
            document.getElementById("add-expense").addEventListener("click", addExpense);
            document.getElementById("save-cards").addEventListener("click", saveCreditCards);
            document.getElementById("save-limits").addEventListener("click", saveLimits);
            document.getElementById("export-data").addEventListener("click", exportData);
            document.getElementById("import-data").addEventListener("click", importData);
            
            // Navega√ß√£o de m√™s
            document.getElementById("prev-month").addEventListener("click", () => navigateMonth('prev'));
            document.getElementById("next-month").addEventListener("click", () => navigateMonth('next'));
            document.getElementById("prev-year").addEventListener("click", () => navigateMonth('prev-year'));
            document.getElementById("next-year").addEventListener("click", () => navigateMonth('next-year'));
            
            // Bot√µes r√°pidos
            document.getElementById("quick-ifood").addEventListener("click", function() {
                document.getElementById("expense-category").value = "ifood";
                document.getElementById("expense-description").value = "iFood r√°pido";
                document.getElementById("expense-amount").value = "45.00";
                document.getElementById("payment-method").value = "nubank";
                showNotification("Campos preenchidos para iFood! üçî");
            });
            
            document.getElementById("quick-uber").addEventListener("click", function() {
                document.getElementById("expense-category").value = "uber";
                document.getElementById("expense-description").value = "Uber r√°pido";
                document.getElementById("expense-amount").value = "28.00";
                document.getElementById("payment-method").value = "mercado-pago";
                showNotification("Campos preenchidos para Uber! üöó");
            });
            
            // Humor do dia
            document.querySelectorAll(".mood-btn").forEach(btn => {
                btn.addEventListener("click", function() {
                    document.querySelectorAll(".mood-btn").forEach(b => b.classList.remove("selected"));
                    this.classList.add("selected");
                    
                    const mood = this.getAttribute("data-mood");
                    const date = new Date().toISOString().split('T')[0];
                    appData.moodHistory[date] = mood;
                    saveData();
                    
                    showNotification(`Humor registrado: ${this.textContent}`);
                });
            });
            
            // Navega√ß√£o por abas
            document.querySelectorAll(".tab, .nav-item").forEach(tab => {
                tab.addEventListener("click", function(e) {
                    e.preventDefault();
                    const tabId = this.getAttribute("data-tab");
                    switchTab(tabId);
                });
            });
            
            // PDFs
            document.getElementById("pdf-month").addEventListener("click", generateMonthPDF);
            document.getElementById("pdf-week").addEventListener("click", generateWeekPDF);
            document.getElementById("pdf-cards").addEventListener("click", function() {
                showNotification("Relat√≥rio de cart√µes em desenvolvimento! üí≥");
            });
            
            document.getElementById("pdf-custom").addEventListener("click", function() {
                document.getElementById("custom-report-modal").style.display = "flex";
            });
            
            document.getElementById("generate-custom-pdf").addEventListener("click", function() {
                // Implementar PDF personalizado
                showNotification("Relat√≥rio personalizado em desenvolvimento! üìä");
                document.getElementById("custom-report-modal").style.display = "none";
            });
            
            document.getElementById("close-modal").addEventListener("click", function() {
                document.getElementById("custom-report-modal").style.display = "none";
            });
            
            // Fechar modal ao clicar fora
            document.getElementById("custom-report-modal").addEventListener("click", function(e) {
                if (e.target === this) {
                    this.style.display = "none";
                }
            });
            
            // Importar arquivo
            document.getElementById("import-file").addEventListener("change", function(e) {
                const file = e.target.files[0];
                if (!file) return;
                
                const reader = new FileReader();
                reader.onload = function(e) {
                    try {
                        const importedData = JSON.parse(e.target.result);
                        Object.assign(appData, importedData);
                        updateUI();
                        saveData();
                        showNotification("Dados importados com sucesso! üîÑ");
                    } catch (error) {
                        showNotification("Erro ao importar dados. Verifique o arquivo.", "error");
                    }
                };
                reader.readAsText(file);
                
                e.target.value = "";
            });
            
            // Configurar data atual
            const todayStr = new Date().toISOString().split('T')[0];
            document.getElementById("expense-date").value = todayStr;
            
            // Atualizar despesas ao mudar data
            document.getElementById("expense-date").addEventListener("change", updateDailyExpenses);
            
            // Configurar meta mensal
            document.getElementById("month-goal").addEventListener("change", function() {
                appData.monthlyGoal = parseFloat(this.value) || 0;
                saveData();
                updateStats();
            });
            
            // Adicionar estilos para anima√ß√µes
            const style = document.createElement("style");
            style.textContent = `
                @keyframes slideIn {
                    from { transform: translateX(100%); opacity: 0; }
                    to { transform: translateX(0); opacity: 1; }
                }
                
                @keyframes slideOut {
                    from { transform: translateX(0); opacity: 1; }
                    to { transform: translateX(100%); opacity: 0; }
                }
                
                @keyframes pulse {
                    0% { transform: scale(1); }
                    50% { transform: scale(1.05); }
                    100% { transform: scale(1); }
                }
                
                .mood-btn.selected {
                    animation: pulse 0.5s ease-in-out;
                }
                
                /* Para PWA */
                @media all and (display-mode: standalone) {
                    body { padding-bottom: 120px; }
                }
            `;
            document.head.appendChild(style);
            
            // Verificar se √© PWA instalado
            if (window.matchMedia('(display-mode: standalone)').matches) {
                console.log("Executando como aplicativo instalado");
            }
            
            // Mostrar mensagem de boas-vindas
            setTimeout(() => {
                showNotification("Bem-vindo ao seu controle financeiro! üí∞‚ú®");
            }, 1000);
        }
        
        // Iniciar quando a p√°gina carregar
        document.addEventListener("DOMContentLoaded", initApp);
    </script>
</body>
</html>