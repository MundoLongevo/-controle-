<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Meus Gastos</title>
    
    <!-- PWA / √çcone bonito na tela inicial -->
    <meta name="theme-color" content="#10B981">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Meus Gastos">
    <link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAAXNSR0IArs4c6QAAAARzQklUCAgICHwIZIgAAAIGSURBVHic7Zq9ThtBFMf/51mQEAghQQoUsYDkJq6oQnogJSpKXkDR8QaUNHkCHgNRRElDRQWE+EhBEKEggc1nIWR2d2Z2ZmfGtvd+lZXi3P2d/53Z2dm5ERiGYRiGYRiGYRjGnBAU4OkeuK+ArqLUi7J/r4C9t3j/ywDwE7hdAY9V6fX3B3A7Tq/XHcB6Gb0uAO7WAe83ed7dAXzZAA3eFuB2DXhY4XneA7i7COosYJoKflwDrjL87hI+z/+A73r/x3fgvK6gdP2o+V+BQpO+B9AuKEiA9hwNoE1QkAC1mTRUBSYFBSBJyO27tEDhT0CjCZAG1OdHwN8i1Vc9AAYbZx3Fz0u7Afht+8/RSW8v1fPkY2h8Pw98twt86wyh/AV1h6rA2g+AAq0CAn6fAW5XgN6C2j61L01T0a0ggB4z8PELqLuZwrp/I1nf8m12VQd0BdAOQHdIs0xt3zYHqD2A7gN9L2M7SRnQEaDdAvrOq+xLgQNtI6A7BHQvI5m5tQwoCeg+AR2/wj4WuLc9AxoB7VXAd1+pHwuU2zOgCdBqR2grlI+k2BZAUwE0Y/tlYg2ALQJaB2gUoGtT5N1gkwBNAig9z1MuzUibP9EoQKObO63IQKMAjRKUoA8kRKNARgF6Ow1H+zSgBQDNE9T0Azh7L3b7c0ILoFkFNH4C/YO/Z/wPYCysYRiGYRiGYRiGMQ/8A1c2HynRQI5LAAAAAElFTkSuQmCC">
    
    <style>
        /* CORES LIMPAS E CALMAS */
        :root {
            --verde: #10B981;
            --verde-claro: #D1FAE5;
            --vermelho: #EF4444;
            --vermelho-claro: #FEE2E2;
            --azul: #3B82F6;
            --azul-claro: #DBEAFE;
            --roxo: #8B5CF6;
            --roxo-claro: #EDE9FE;
            --amarelo: #F59E0B;
            --amarelo-claro: #FEF3C7;
            --cinza-claro: #F9FAFB;
            --cinza-medio: #E5E7EB;
            --cinza-escuro: #374151;
            --branco: #FFFFFF;
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Roboto, -apple-system, sans-serif;
        }
        
        body {
            background-color: var(--cinza-claro);
            color: var(--cinza-escuro);
            line-height: 1.5;
            padding-bottom: 90px;
        }
        
        .container {
            max-width: 500px;
            margin: 0 auto;
            padding: 0 16px;
        }
        
        /* CABE√áALHO */
        .cabecalho {
            background: var(--branco);
            padding: 20px 0 16px;
            margin-bottom: 16px;
            border-bottom: 1px solid var(--cinza-medio);
            position: sticky;
            top: 0;
            z-index: 10;
        }
        
        .cabecalho h1 {
            font-size: 1.5rem;
            font-weight: 600;
            color: var(--cinza-escuro);
            text-align: center;
        }
        
        .data-atual {
            text-align: center;
            font-size: 0.9rem;
            color: #6B7280;
            margin-top: 4px;
        }
        
        /* META DO DIA - DESTAQUE */
        .meta-dia {
            background: var(--branco);
            border-radius: 20px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            border-left: 4px solid var(--verde);
        }
        
        .meta-titulo {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 8px;
        }
        
        .meta-titulo h2 {
            font-size: 1rem;
            font-weight: 600;
            color: var(--cinza-escuro);
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .meta-valor {
            font-size: 2.2rem;
            font-weight: 700;
            text-align: center;
            margin: 8px 0;
        }
        
        .meta-zero {
            color: var(--verde);
        }
        
        .meta-gasto {
            color: var(--vermelho);
        }
        
        .meta-msg {
            text-align: center;
            font-size: 0.9rem;
            color: #6B7280;
        }
        
        /* MEDALHAS */
        .medalhas {
            background: var(--branco);
            border-radius: 20px;
            padding: 16px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            display: flex;
            align-items: center;
            justify-content: space-around;
        }
        
        .medalha-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
        }
        
        .medalha-icone {
            width: 44px;
            height: 44px;
            background: var(--verde-claro);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 6px;
            color: var(--verde);
            font-size: 1.4rem;
        }
        
        .medalha-icone.bloqueada {
            background: var(--cinza-medio);
            color: #9CA3AF;
        }
        
        .medalha-texto {
            font-size: 0.75rem;
            color: #6B7280;
        }
        
        /* LISTA DE GASTOS DO DIA */
        .gastos-hoje {
            background: var(--branco);
            border-radius: 20px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
            overflow: hidden;
        }
        
        .gastos-header {
            padding: 16px 20px;
            border-bottom: 1px solid var(--cinza-medio);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .gastos-header h2 {
            font-size: 1rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.5px;
        }
        
        .gasto-count {
            background: var(--cinza-claro);
            padding: 2px 10px;
            border-radius: 20px;
            font-size: 0.8rem;
        }
        
        .lista-gastos {
            max-height: 350px;
            overflow-y: auto;
        }
        
        .gasto-item {
            padding: 16px 20px;
            border-bottom: 1px solid var(--cinza-medio);
            display: flex;
            justify-content: space-between;
            align-items: center;
            transition: background 0.2s;
            cursor: pointer;
        }
        
        .gasto-item:active {
            background: var(--cinza-claro);
        }
        
        .gasto-info {
            flex: 1;
        }
        
        .gasto-categoria {
            font-size: 0.75rem;
            color: #6B7280;
            text-transform: uppercase;
            margin-bottom: 4px;
        }
        
        .gasto-descricao {
            font-weight: 500;
            margin-bottom: 4px;
        }
        
        .gasto-pagamento {
            font-size: 0.7rem;
            color: #9CA3AF;
        }
        
        .gasto-valor {
            font-weight: 600;
            font-size: 1.1rem;
            color: var(--vermelho);
        }
        
        .gasto-zero {
            color: var(--verde);
        }
        
        .gasto-vazio {
            padding: 40px 20px;
            text-align: center;
            color: #9CA3AF;
        }
        
        .gasto-vazio i {
            font-size: 2.5rem;
            margin-bottom: 12px;
            color: var(--cinza-medio);
        }
        
        /* BOT√ÉO ADICIONAR */
        .btn-adicionar {
            position: fixed;
            bottom: 100px;
            right: 20px;
            width: 60px;
            height: 60px;
            background: var(--verde);
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.8rem;
            box-shadow: 0 4px 12px rgba(16, 185, 129, 0.4);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 20;
            transition: transform 0.2s;
        }
        
        .btn-adicionar:active {
            transform: scale(0.95);
        }
        
        /* MODAL (USADO PARA ADICIONAR E EDITAR) */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
            padding: 20px;
            backdrop-filter: blur(4px);
        }
        
        .modal-conteudo {
            background: var(--branco);
            border-radius: 24px;
            width: 100%;
            max-width: 400px;
            max-height: 90vh;
            overflow-y: auto;
            animation: slideUp 0.3s ease-out;
            box-shadow: 0 20px 40px rgba(0,0,0,0.15);
        }
        
        @keyframes slideUp {
            from { transform: translateY(50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }
        
        .modal-header {
            padding: 20px;
            border-bottom: 1px solid var(--cinza-medio);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .modal-header h2 {
            font-size: 1.2rem;
            font-weight: 600;
        }
        
        .btn-fechar {
            background: none;
            border: none;
            font-size: 1.5rem;
            color: #6B7280;
            cursor: pointer;
            padding: 0 8px;
        }
        
        .form-group {
            padding: 20px;
        }
        
        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 16px;
        }
        
        .input-group {
            margin-bottom: 20px;
        }
        
        .input-group label {
            display: block;
            margin-bottom: 6px;
            font-weight: 500;
            color: var(--cinza-escuro);
            font-size: 0.9rem;
        }
        
        .input-group input,
        .input-group select,
        .input-group textarea {
            width: 100%;
            padding: 14px 16px;
            border: 1px solid var(--cinza-medio);
            border-radius: 12px;
            font-size: 1rem;
            background: var(--branco);
            transition: border 0.2s;
        }
        
        .input-group input:focus,
        .input-group select:focus,
        .input-group textarea:focus {
            outline: none;
            border-color: var(--verde);
        }
        
        .btn-salvar {
            background: var(--verde);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            margin-top: 8px;
        }
        
        .btn-deletar {
            background: var(--vermelho-claro);
            color: var(--vermelho);
            border: 1px solid var(--vermelho);
            padding: 14px;
            border-radius: 12px;
            font-size: 0.95rem;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            margin-top: 12px;
        }
        
        /* BOT√ïES DE DATA NO HIST√ìRICO */
        .navegador-data {
            display: flex;
            align-items: center;
            justify-content: space-between;
            background: var(--branco);
            border-radius: 20px;
            padding: 12px 20px;
            margin-bottom: 16px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.04);
        }
        
        .btn-data {
            background: var(--cinza-claro);
            border: none;
            width: 44px;
            height: 44px;
            border-radius: 50%;
            font-size: 1.2rem;
            color: var(--cinza-escuro);
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .data-selecionada {
            font-weight: 600;
            font-size: 1rem;
        }
        
        .resumo-dia {
            background: var(--cinza-claro);
            border-radius: 16px;
            padding: 16px;
            margin-top: 8px;
            text-align: center;
        }
        
        /* CART√ïES - TELA SIMPLES */
        .cartoes-lista {
            display: flex;
            flex-direction: column;
            gap: 16px;
            margin-bottom: 20px;
        }
        
        .cartao-card {
            background: linear-gradient(145deg, #2c3e50, #1e2a36);
            color: white;
            border-radius: 20px;
            padding: 20px;
            box-shadow: 0 6px 12px rgba(0,0,0,0.1);
        }
        
        .cartao-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin-bottom: 16px;
        }
        
        .cartao-nome {
            font-size: 1.1rem;
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 8px;
        }
        
        .cartao-input {
            background: rgba(255,255,255,0.2);
            border: 1px solid rgba(255,255,255,0.3);
            border-radius: 10px;
            padding: 10px 14px;
            color: white;
            font-size: 0.95rem;
            width: 100%;
            margin-top: 6px;
        }
        
        .cartao-input::placeholder {
            color: rgba(255,255,255,0.6);
        }
        
        .cartao-total {
            margin-top: 16px;
            padding-top: 16px;
            border-top: 1px solid rgba(255,255,255,0.2);
            font-size: 0.95rem;
            display: flex;
            justify-content: space-between;
        }
        
        .btn-salvar-cartoes {
            background: var(--azul);
            color: white;
            border: none;
            padding: 16px;
            border-radius: 16px;
            font-size: 1rem;
            font-weight: 600;
            width: 100%;
            cursor: pointer;
            margin-top: 10px;
        }
        
        /* MENU INFERIOR */
        .menu-inferior {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            background: var(--branco);
            display: flex;
            justify-content: space-around;
            padding: 12px 10px;
            box-shadow: 0 -4px 12px rgba(0,0,0,0.04);
            z-index: 30;
            border-top: 1px solid var(--cinza-medio);
        }
        
        .menu-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: #9CA3AF;
            text-decoration: none;
            font-size: 0.7rem;
            transition: color 0.2s;
            padding: 6px 0;
            flex: 1;
            border-radius: 12px;
        }
        
        .menu-item i {
            font-size: 1.5rem;
            margin-bottom: 4px;
        }
        
        .menu-item.ativo {
            color: var(--verde);
            font-weight: 600;
        }
        
        /* P√ÅGINAS */
        .pagina {
            display: none;
        }
        
        .pagina.ativa {
            display: block;
        }
        
        /* NOTIFICA√á√ÉO */
        .notificacao {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--verde);
            color: white;
            padding: 14px 20px;
            border-radius: 30px;
            box-shadow: 0 6px 16px rgba(0,0,0,0.15);
            z-index: 2000;
            animation: slideInRight 0.3s;
            display: none;
            font-size: 0.9rem;
            font-weight: 500;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        /* UTILIT√ÅRIOS */
        .mt-3 { margin-top: 16px; }
        .text-center { text-align: center; }
        .text-small { font-size: 0.8rem; color: #6B7280; }
    </style>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- NOTIFICA√á√ÉO FLUTUANTE -->
    <div id="notificacao" class="notificacao">‚úÖ Gasto salvo</div>
    
    <!-- MODAL PARA ADICIONAR/EDITAR GASTO -->
    <div id="modalGasto" class="modal">
        <div class="modal-conteudo">
            <div class="modal-header">
                <h2 id="modalTitulo"><i class="fas fa-plus-circle" style="color: var(--verde);"></i> Adicionar Gasto</h2>
                <button class="btn-fechar" onclick="fecharModal()">√ó</button>
            </div>
            <div class="form-group">
                <input type="hidden" id="gastoId" value="">
                <div class="input-group">
                    <label><i class="fas fa-tag"></i> Categoria</label>
                    <select id="categoria">
                        <option value="ifood">üçî iFood / Delivery</option>
                        <option value="uber">üöó Uber / Transporte</option>
                        <option value="padaria">ü•ñ Padaria / P√£o</option>
                        <option value="bar">üç∫ Bar / Happy Hour</option>
                        <option value="comprasonline">üì¶ Compras online</option>
                        <option value="farmacia">üíä Farm√°cia</option>
                        <option value="gasolina">‚õΩ Gasolina</option>
                        <option value="dizimo">‚õ™ D√≠zimo</option>
                        <option value="supermercado">üõí Supermercado</option>
                        <option value="lazer">üé¨ Lazer</option>
                        <option value="outros">üì¶ Outros</option>
                    </select>
                </div>
                <div class="form-row">
                    <div class="input-group">
                        <label><i class="fas fa-calendar"></i> Data</label>
                        <input type="date" id="dataGasto">
                    </div>
                    <div class="input-group">
                        <label><i class="fas fa-money-bill-wave"></i> Valor (R$)</label>
                        <input type="number" id="valor" step="0.01" min="0" placeholder="0,00">
                    </div>
                </div>
                <div class="input-group">
                    <label><i class="fas fa-align-left"></i> Descri√ß√£o</label>
                    <input type="text" id="descricao" placeholder="Ex: p√£o franc√™s, almo√ßo...">
                </div>
                <div class="input-group">
                    <label><i class="fas fa-credit-card"></i> Pagamento</label>
                    <select id="pagamento">
                        <option value="nubank">üíú Nubank</option>
                        <option value="cef">üè¶ Caixa</option>
                        <option value="porto">üõ°Ô∏è Porto Seguro</option>
                        <option value="mercado">üõí Mercado Pago</option>
                        <option value="debito">üí≥ D√©bito BB</option>
                        <option value="pix">‚ö° Pix</option>
                        <option value="dinheiro">üíµ Dinheiro</option>
                    </select>
                </div>
                <div class="input-group">
                    <label><i class="fas fa-pen"></i> Observa√ß√£o (opcional)</label>
                    <textarea id="obs" rows="2" placeholder="Algo a mais?"></textarea>
                </div>
                
                <button class="btn-salvar" id="btnSalvarGasto" onclick="salvarGasto()">
                    <i class="fas fa-check-circle"></i> Salvar
                </button>
                
                <!-- Bot√£o de deletar (aparece apenas na edi√ß√£o) -->
                <button class="btn-deletar" id="btnDeletarGasto" onclick="deletarGasto()" style="display: none;">
                    <i class="fas fa-trash-alt"></i> Excluir gasto
                </button>
            </div>
        </div>
    </div>
    
    <!-- P√ÅGINA PRINCIPAL - GASTOS DE HOJE -->
    <div id="paginaHome" class="pagina ativa">
        <div class="container">
            <div class="cabecalho">
                <h1><i class="fas fa-wallet" style="color: var(--verde);"></i> Meus Gastos</h1>
                <div class="data-atual" id="dataAtualDisplay"></div>
            </div>
            
            <!-- META DI√ÅRIA -->
            <div class="meta-dia" id="metaDia">
                <div class="meta-titulo">
                    <h2><i class="fas fa-bullseye"></i> Meta de hoje</h2>
                    <span id="medalhaDia"></span>
                </div>
                <div class="meta-valor" id="metaValor">R$ 0,00</div>
                <div class="meta-msg" id="metaMsg">üéØ Gastei ZERO hoje!</div>
            </div>
            
            <!-- MEDALHAS -->
            <div class="medalhas">
                <div class="medalha-item">
                    <div class="medalha-icone" id="medalha7">
                        <i class="fas fa-calendar-check"></i>
                    </div>
                    <span class="medalha-texto">7 dias</span>
                </div>
                <div class="medalha-item">
                    <div class="medalha-icone" id="medalhaZero">
                        <i class="fas fa-trophy"></i>
                    </div>
                    <span class="medalha-texto">Zero hoje</span>
                </div>
                <div class="medalha-item">
                    <div class="medalha-icone" id="medalhaMes">
                        <i class="fas fa-fire"></i>
                    </div>
                    <span class="medalha-texto">M√™s zerado</span>
                </div>
            </div>
            
            <!-- GASTOS DE HOJE -->
            <div class="gastos-hoje">
                <div class="gastos-header">
                    <h2><i class="fas fa-sun"></i> Gastos de hoje</h2>
                    <span class="gasto-count" id="contadorHoje">0</span>
                </div>
                <div id="listaGastosHoje" class="lista-gastos">
                    <!-- preenchido via js -->
                </div>
            </div>
            
            <!-- RESUMO DO DIA (ANTES DE DORMIR) -->
            <div class="resumo-dia">
                <p><i class="fas fa-moon"></i> <strong>Resumo do dia</strong></p>
                <p id="resumoTexto">Nenhum gasto registrado.</p>
                <p style="font-size: 1.2rem; font-weight: bold; margin-top: 8px;" id="resumoValor">R$ 0,00</p>
            </div>
        </div>
    </div>
    
    <!-- P√ÅGINA DE HIST√ìRICO -->
    <div id="paginaHistorico" class="pagina">
        <div class="container">
            <div class="cabecalho">
                <h1><i class="fas fa-history" style="color: var(--azul);"></i> Hist√≥rico</h1>
            </div>
            
            <!-- Navegador de datas -->
            <div class="navegador-data">
                <button class="btn-data" onclick="navegarDia(-1)"><i class="fas fa-chevron-left"></i></button>
                <div>
                    <div class="data-selecionada" id="dataHistoricoLabel"></div>
                    <div style="font-size: 0.8rem; color: #6B7280;" id="totalDiaHistorico">R$ 0,00</div>
                </div>
                <button class="btn-data" onclick="navegarDia(1)"><i class="fas fa-chevron-right"></i></button>
            </div>
            
            <!-- Lista de gastos do dia selecionado -->
            <div class="gastos-hoje">
                <div class="gastos-header">
                    <h2><i class="fas fa-list"></i> Gastos do dia</h2>
                    <span class="gasto-count" id="contadorHistorico">0</span>
                </div>
                <div id="listaGastosHistorico" class="lista-gastos">
                    <!-- preenchido via js -->
                </div>
            </div>
            
            <!-- Medalha se zerou naquele dia -->
            <div id="medalhaHistorico" style="text-align: center; padding: 12px; background: var(--amarelo-claro); border-radius: 16px; margin-top: 16px; display: none;">
                <i class="fas fa-medal" style="color: var(--amarelo); font-size: 1.5rem;"></i>
                <span style="font-weight: 600; color: var(--amarelo);">Voc√™ zerou esse dia! üéñÔ∏è</span>
            </div>
        </div>
    </div>
    
    <!-- P√ÅGINA DE CART√ïES -->
    <div id="paginaCartoes" class="pagina">
        <div class="container">
            <div class="cabecalho">
                <h1><i class="fas fa-credit-card" style="color: var(--roxo);"></i> Cart√µes</h1>
                <p class="text-small text-center">Parcelas mensais e saldo devedor</p>
            </div>
            
            <div class="cartoes-lista" id="cartoesContainer">
                <!-- gerado via js -->
            </div>
            
            <button class="btn-salvar-cartoes" onclick="salvarCartoes()">
                <i class="fas fa-save"></i> Salvar cart√µes
            </button>
            
            <div style="background: var(--roxo-claro); padding: 20px; border-radius: 20px; margin-top: 24px; text-align: center;">
                <span style="font-weight: 600;">Total de parcelas mensais:</span>
                <span style="font-size: 1.8rem; font-weight: 700; color: var(--roxo); display: block;" id="totalParcelas">R$ 0,00</span>
                <span style="font-weight: 600; margin-top: 8px; display: block;">Saldo devedor total:</span>
                <span style="font-size: 1.6rem; font-weight: 700; color: var(--roxo);" id="totalSaldo">R$ 0,00</span>
            </div>
        </div>
    </div>
    
    <!-- MENU INFERIOR -->
    <div class="menu-inferior">
        <a href="#" class="menu-item ativo" onclick="mudarPagina('home'); return false;">
            <i class="fas fa-home"></i>
            <span>Hoje</span>
        </a>
        <a href="#" class="menu-item" onclick="mudarPagina('historico'); return false;">
            <i class="fas fa-calendar-alt"></i>
            <span>Hist√≥rico</span>
        </a>
        <a href="#" class="menu-item" onclick="mudarPagina('cartoes'); return false;">
            <i class="fas fa-credit-card"></i>
            <span>Cart√µes</span>
        </a>
    </div>
    
    <!-- BOT√ÉO FLUTUANTE (s√≥ aparece na home) -->
    <button id="btnAddGasto" class="btn-adicionar" onclick="abrirModalNovo()">
        <i class="fas fa-plus"></i>
    </button>
    
    <script>
        // ---------- DADOS ----------
        const dados = {
            gastos: [],           // todos os gastos, cada um com id, data, categoria, descricao, valor, pagamento, obs
            cartoes: {
                nubank: { parcela: 1250, saldo: 8500 },
                cef: { parcela: 900, saldo: 6500 },
                porto: { parcela: 600, saldo: 3200 },
                mercado: { parcela: 400, saldo: 1800 }
            },
            medalhas: {
                diasZero: 0,          // dias zerados no m√™s atual
                sequenciaDias: 0      // dias seguidos registrando
            },
            ultimoAcesso: null
        };
        
        // ---------- FUN√á√ïES DE PERSIST√äNCIA ----------
        function carregarDados() {
            const storage = localStorage.getItem('meusGastosApp');
            if (storage) {
                const obj = JSON.parse(storage);
                dados.gastos = obj.gastos || [];
                dados.cartoes = obj.cartoes || dados.cartoes;
                dados.medalhas = obj.medalhas || dados.medalhas;
                dados.ultimoAcesso = obj.ultimoAcesso;
            }
            // Garantir que todos os gastos tenham ID
            dados.gastos.forEach((g, idx) => { if (!g.id) g.id = Date.now() + idx; });
        }
        
        function salvarDados() {
            localStorage.setItem('meusGastosApp', JSON.stringify(dados));
        }
        
        // ---------- UTILIT√ÅRIOS ----------
        function formatarMoeda(valor) {
            return 'R$ ' + valor.toFixed(2).replace('.', ',');
        }
        
        function obterDataHoje() {
            const d = new Date();
            const ano = d.getFullYear();
            const mes = String(d.getMonth() + 1).padStart(2, '0');
            const dia = String(d.getDate()).padStart(2, '0');
            return `${ano}-${mes}-${dia}`;
        }
        
        // ---------- INTERFACE PRINCIPAL ----------
        let dataHistoricoAtual = obterDataHoje();
        
        function atualizarTelaHome() {
            const hoje = obterDataHoje();
            const gastosHoje = dados.gastos.filter(g => g.data === hoje);
            const totalHoje = gastosHoje.reduce((acc, g) => acc + g.valor, 0);
            
            // Meta
            const metaEl = document.getElementById('metaValor');
            const metaMsg = document.getElementById('metaMsg');
            const medalhaDia = document.getElementById('medalhaDia');
            
            if (totalHoje === 0) {
                metaEl.innerHTML = 'R$ 0,00';
                metaEl.className = 'meta-valor meta-zero';
                metaMsg.innerHTML = 'üéØ Gastei ZERO hoje! Meta cumprida!';
                medalhaDia.innerHTML = '<i class="fas fa-medal" style="color: var(--amarelo);"></i>';
                document.getElementById('medalhaZero').className = 'medalha-icone';
                document.getElementById('medalhaZero').innerHTML = '<i class="fas fa-trophy"></i>';
            } else {
                metaEl.innerHTML = formatarMoeda(totalHoje);
                metaEl.className = 'meta-valor meta-gasto';
                metaMsg.innerHTML = `üò¨ Voc√™ gastou ${formatarMoeda(totalHoje)} hoje.`;
                medalhaDia.innerHTML = '';
                document.getElementById('medalhaZero').className = 'medalha-icone bloqueada';
                document.getElementById('medalhaZero').innerHTML = '<i class="fas fa-lock"></i>';
            }
            
            // Contador
            document.getElementById('contadorHoje').innerText = gastosHoje.length;
            
            // Lista
            const lista = document.getElementById('listaGastosHoje');
            lista.innerHTML = '';
            if (gastosHoje.length === 0) {
                lista.innerHTML = '<div class="gasto-vazio"><i class="fas fa-smile-wink"></i><p>Nenhum gasto hoje! üéâ</p></div>';
            } else {
                gastosHoje.sort((a,b) => new Date(b.data) - new Date(a.data)).forEach(g => {
                    const item = criarItemGasto(g);
                    item.onclick = () => abrirModalEditar(g.id);
                    lista.appendChild(item);
                });
            }
            
            // Resumo do dia
            const resumoValor = document.getElementById('resumoValor');
            resumoValor.innerText = formatarMoeda(totalHoje);
            if (totalHoje === 0) {
                document.getElementById('resumoTexto').innerHTML = '<i class="fas fa-check-circle" style="color: var(--verde);"></i> Parab√©ns! Voc√™ n√£o gastou nada hoje.';
            } else {
                document.getElementById('resumoTexto').innerHTML = `<i class="fas fa-info-circle"></i> Total gasto hoje:`;
            }
            
            // Atualizar data no cabe√ßalho
            const hojeDate = new Date();
            const diasSemana = ['Domingo', 'Segunda', 'Ter√ßa', 'Quarta', 'Quinta', 'Sexta', 'S√°bado'];
            const diaSem = diasSemana[hojeDate.getDay()];
            const diaMes = hojeDate.toLocaleDateString('pt-BR');
            document.getElementById('dataAtualDisplay').innerHTML = `${diaSem}, ${diaMes}`;
            
            // Medalha de 7 dias (exemplo simples)
            // (implementa√ß√£o real pode ser mais complexa, mas aqui apenas ilustrativa)
            const diasRegistrados = [...new Set(dados.gastos.map(g => g.data))].length;
            if (diasRegistrados >= 7) {
                document.getElementById('medalha7').className = 'medalha-icone';
                document.getElementById('medalha7').innerHTML = '<i class="fas fa-calendar-check"></i>';
            } else {
                document.getElementById('medalha7').className = 'medalha-icone bloqueada';
                document.getElementById('medalha7').innerHTML = '<i class="fas fa-lock"></i>';
            }
            
            // Medalha de m√™s zerado (simplificada)
            // ...
        }
        
        function criarItemGasto(g) {
            const div = document.createElement('div');
            div.className = 'gasto-item';
            
            const iconesCategoria = {
                ifood: 'üçî', uber: 'üöó', padaria: 'ü•ñ', bar: 'üç∫', comprasonline: 'üì¶',
                farmacia: 'üíä', gasolina: '‚õΩ', dizimo: '‚õ™', supermercado: 'üõí', lazer: 'üé¨', outros: 'üì¶'
            };
            const nomeCategoria = {
                ifood: 'iFood', uber: 'Uber', padaria: 'Padaria', bar: 'Bar', comprasonline: 'Online',
                farmacia: 'Farm√°cia', gasolina: 'Gasolina', dizimo: 'D√≠zimo', supermercado: 'Mercado', lazer: 'Lazer', outros: 'Outros'
            };
            
            div.innerHTML = `
                <div class="gasto-info">
                    <div class="gasto-categoria">${iconesCategoria[g.categoria] || 'üì¶'} ${nomeCategoria[g.categoria] || 'Outros'}</div>
                    <div class="gasto-descricao">${g.descricao || 'Sem descri√ß√£o'}</div>
                    <div class="gasto-pagamento">üí≥ ${g.pagamento || 'outro'}</div>
                </div>
                <div class="gasto-valor">R$ ${g.valor.toFixed(2).replace('.',',')}</div>
            `;
            return div;
        }
        
        // ---------- HIST√ìRICO ----------
        function atualizarHistorico() {
            document.getElementById('dataHistoricoLabel').innerText = new Date(dataHistoricoAtual + 'T12:00:00').toLocaleDateString('pt-BR', { weekday: 'short', day: 'numeric', month: 'numeric' });
            
            const gastosDia = dados.gastos.filter(g => g.data === dataHistoricoAtual);
            const total = gastosDia.reduce((acc, g) => acc + g.valor, 0);
            document.getElementById('totalDiaHistorico').innerText = formatarMoeda(total);
            document.getElementById('contadorHistorico').innerText = gastosDia.length;
            
            const lista = document.getElementById('listaGastosHistorico');
            lista.innerHTML = '';
            if (gastosDia.length === 0) {
                lista.innerHTML = '<div class="gasto-vazio"><i class="fas fa-calendar-times"></i><p>Nenhum gasto nesse dia.</p></div>';
            } else {
                gastosDia.sort((a,b) => a.data.localeCompare(b.data)).forEach(g => {
                    const item = criarItemGasto(g);
                    item.onclick = () => abrirModalEditar(g.id);
                    lista.appendChild(item);
                });
            }
            
            // Medalha de dia zerado
            const medalhaHist = document.getElementById('medalhaHistorico');
            if (total === 0 && gastosDia.length === 0) {
                medalhaHist.style.display = 'block';
            } else {
                medalhaHist.style.display = 'none';
            }
        }
        
        function navegarDia(delta) {
            const d = new Date(dataHistoricoAtual + 'T12:00:00');
            d.setDate(d.getDate() + delta);
            const ano = d.getFullYear();
            const mes = String(d.getMonth() + 1).padStart(2, '0');
            const dia = String(d.getDate()).padStart(2, '0');
            dataHistoricoAtual = `${ano}-${mes}-${dia}`;
            atualizarHistorico();
        }
        
        // ---------- CART√ïES ----------
        function renderizarCartoes() {
            const container = document.getElementById('cartoesContainer');
            container.innerHTML = '';
            
            const cards = [
                { id: 'nubank', nome: 'Nubank', cor: '#8B5CF6', icone: 'üíú' },
                { id: 'cef', nome: 'Caixa', cor: '#0060a9', icone: 'üè¶' },
                { id: 'porto', nome: 'Porto Seguro', cor: '#0033a0', icone: 'üõ°Ô∏è' },
                { id: 'mercado', nome: 'Mercado Pago', cor: '#00b4ff', icone: 'üõí' }
            ];
            
            cards.forEach(c => {
                const cartao = dados.cartoes[c.id] || { parcela: 0, saldo: 0 };
                const div = document.createElement('div');
                div.className = 'cartao-card';
                div.style.background = `linear-gradient(145deg, ${c.cor}, ${ajustarTom(c.cor, -30)})`;
                div.innerHTML = `
                    <div class="cartao-header">
                        <span class="cartao-nome">${c.icone} ${c.nome}</span>
                    </div>
                    <div style="margin-bottom: 12px;">
                        <label style="font-size: 0.8rem; opacity: 0.9;">Parcela mensal (R$)</label>
                        <input type="number" id="cartao_${c.id}_parcela" class="cartao-input" placeholder="0,00" step="0.01" value="${cartao.parcela}">
                    </div>
                    <div>
                        <label style="font-size: 0.8rem; opacity: 0.9;">Saldo devedor total (R$)</label>
                        <input type="number" id="cartao_${c.id}_saldo" class="cartao-input" placeholder="0,00" step="0.01" value="${cartao.saldo}">
                    </div>
                `;
                container.appendChild(div);
            });
            
            atualizarTotaisCartoes();
        }
        
        function ajustarTom(cor, percent) {
            // simplifica√ß√£o - retorna cor escurecida
            return cor;
        }
        
        function atualizarTotaisCartoes() {
            let totalParcela = 0, totalSaldo = 0;
            ['nubank','cef','porto','mercado'].forEach(id => {
                const p = parseFloat(document.getElementById(`cartao_${id}_parcela`)?.value) || 0;
                const s = parseFloat(document.getElementById(`cartao_${id}_saldo`)?.value) || 0;
                totalParcela += p;
                totalSaldo += s;
            });
            document.getElementById('totalParcelas').innerText = formatarMoeda(totalParcela);
            document.getElementById('totalSaldo').innerText = formatarMoeda(totalSaldo);
        }
        
        function salvarCartoes() {
            ['nubank','cef','porto','mercado'].forEach(id => {
                const parcela = parseFloat(document.getElementById(`cartao_${id}_parcela`)?.value) || 0;
                const saldo = parseFloat(document.getElementById(`cartao_${id}_saldo`)?.value) || 0;
                if (!dados.cartoes[id]) dados.cartoes[id] = {};
                dados.cartoes[id].parcela = parcela;
                dados.cartoes[id].saldo = saldo;
            });
            salvarDados();
            mostrarNotificacao('Cart√µes salvos! üí≥');
            atualizarTotaisCartoes();
        }
        
        // ---------- GASTOS (CRIAR, EDITAR, DELETAR) ----------
        function abrirModalNovo() {
            document.getElementById('modalTitulo').innerHTML = '<i class="fas fa-plus-circle" style="color: var(--verde);"></i> Adicionar Gasto';
            document.getElementById('gastoId').value = '';
            document.getElementById('categoria').value = 'ifood';
            document.getElementById('dataGasto').value = obterDataHoje();
            document.getElementById('valor').value = '';
            document.getElementById('descricao').value = '';
            document.getElementById('pagamento').value = 'nubank';
            document.getElementById('obs').value = '';
            document.getElementById('btnDeletarGasto').style.display = 'none';
            document.getElementById('modalGasto').style.display = 'flex';
        }
        
        function abrirModalEditar(id) {
            const gasto = dados.gastos.find(g => g.id == id);
            if (!gasto) return;
            
            document.getElementById('modalTitulo').innerHTML = '<i class="fas fa-edit" style="color: var(--azul);"></i> Editar Gasto';
            document.getElementById('gastoId').value = gasto.id;
            document.getElementById('categoria').value = gasto.categoria || 'outros';
            document.getElementById('dataGasto').value = gasto.data || obterDataHoje();
            document.getElementById('valor').value = gasto.valor;
            document.getElementById('descricao').value = gasto.descricao || '';
            document.getElementById('pagamento').value = gasto.pagamento || 'nubank';
            document.getElementById('obs').value = gasto.obs || '';
            document.getElementById('btnDeletarGasto').style.display = 'block';
            document.getElementById('modalGasto').style.display = 'flex';
        }
        
        function fecharModal() {
            document.getElementById('modalGasto').style.display = 'none';
        }
        
        function salvarGasto() {
            const id = document.getElementById('gastoId').value;
            const categoria = document.getElementById('categoria').value;
            const data = document.getElementById('dataGasto').value;
            const valor = parseFloat(document.getElementById('valor').value);
            const descricao = document.getElementById('descricao').value.trim();
            const pagamento = document.getElementById('pagamento').value;
            const obs = document.getElementById('obs').value.trim();
            
            if (!valor || valor <= 0) {
                alert('Informe um valor v√°lido!');
                return;
            }
            
            if (id) {
                // Editar
                const index = dados.gastos.findIndex(g => g.id == id);
                if (index !== -1) {
                    dados.gastos[index] = { ...dados.gastos[index], categoria, data, valor, descricao, pagamento, obs };
                }
                mostrarNotificacao('Gasto atualizado! ‚úèÔ∏è');
            } else {
                // Novo
                const novoGasto = {
                    id: Date.now(),
                    categoria,
                    data,
                    valor,
                    descricao: descricao || 'Gasto',
                    pagamento,
                    obs
                };
                dados.gastos.push(novoGasto);
                mostrarNotificacao('Gasto adicionado! ‚úÖ');
            }
            
            salvarDados();
            fecharModal();
            
            // Atualizar telas
            atualizarTelaHome();
            if (dataHistoricoAtual === obterDataHoje()) atualizarHistorico();
            else if (data === dataHistoricoAtual) atualizarHistorico();
        }
        
        function deletarGasto() {
            const id = document.getElementById('gastoId').value;
            if (!id) return;
            if (confirm('Tem certeza que deseja excluir este gasto?')) {
                dados.gastos = dados.gastos.filter(g => g.id != id);
                salvarDados();
                fecharModal();
                atualizarTelaHome();
                atualizarHistorico();
                mostrarNotificacao('Gasto exclu√≠do! üóëÔ∏è');
            }
        }
        
        // ---------- NAVEGA√á√ÉO ----------
        function mudarPagina(pagina) {
            // Esconder todas
            document.querySelectorAll('.pagina').forEach(p => p.classList.remove('ativa'));
            document.querySelectorAll('.menu-item').forEach(i => i.classList.remove('ativo'));
            
            if (pagina === 'home') {
                document.getElementById('paginaHome').classList.add('ativa');
                document.querySelectorAll('.menu-item')[0].classList.add('ativo');
                document.getElementById('btnAddGasto').style.display = 'flex';
                atualizarTelaHome();
            } else if (pagina === 'historico') {
                document.getElementById('paginaHistorico').classList.add('ativa');
                document.querySelectorAll('.menu-item')[1].classList.add('ativo');
                document.getElementById('btnAddGasto').style.display = 'none';
                dataHistoricoAtual = obterDataHoje();
                atualizarHistorico();
            } else if (pagina === 'cartoes') {
                document.getElementById('paginaCartoes').classList.add('ativa');
                document.querySelectorAll('.menu-item')[2].classList.add('ativo');
                document.getElementById('btnAddGasto').style.display = 'none';
                renderizarCartoes();
            }
        }
        
        // ---------- NOTIFICA√á√ÉO ----------
        function mostrarNotificacao(msg) {
            const el = document.getElementById('notificacao');
            el.innerText = msg;
            el.style.display = 'block';
            setTimeout(() => { el.style.display = 'none'; }, 2500);
        }
        
        // ---------- INICIALIZA√á√ÉO ----------
        window.onload = function() {
            carregarDados();
            
            // Exemplo de gastos iniciais (zerados, conforme pedido)
            if (dados.gastos.length === 0) {
                // N√£o adiciona nada - come√ßa zerado
            }
            
            atualizarTelaHome();
            
            // Fechar modal ao clicar fora
            window.onclick = function(event) {
                const modal = document.getElementById('modalGasto');
                if (event.target === modal) {
                    fecharModal();
                }
            };
        };
    </script>
</body>
</html>