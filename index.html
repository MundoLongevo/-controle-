<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üí∞ Zero Gastos</title>
    
    <!-- Configura√ß√µes PWA -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#FF3B30">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="apple-mobile-web-app-title" content="Zero Gastos">
    <link rel="icon" type="image/png" href="icon-192.png">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="style.css">
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Tela de carregamento -->
    <div class="carregando" id="carregando">
        <div class="logo-central">
            <div class="quadrado-preto"></div>
        </div>
        <h2 class="titulo-app">Zero Gastos</h2>
        <p class="subtitulo">Controle total das suas despesas</p>
    </div>

    <!-- Tela principal -->
    <div class="container" id="telaPrincipal" style="display: none;">
        <!-- Cabe√ßalho -->
        <header class="header">
            <div class="logo-cabecalho">
                <div class="quadrado-preto pequeno"></div>
                <h1>Zero Gastos</h1>
            </div>
            <div class="contador-dias">
                <span id="diasSemGastar">0</span>
                <small>dias sem gastar</small>
            </div>
        </header>

        <!-- Meta do dia -->
        <div class="meta-dia">
            <h3><i class="fas fa-bullseye"></i> Meta de Hoje</h3>
            <div class="progresso-container">
                <div class="progresso-bar" id="progressoMeta">
                    <span id="textoProgresso">100% - Meta alcan√ßada!</span>
                </div>
            </div>
            <p class="saldo-hoje" id="saldoHoje">R$ 0,00 gastos hoje</p>
        </div>

        <!-- Medalhas -->
        <div class="medalhas">
            <h3><i class="fas fa-medal"></i> Medalhas</h3>
            <div class="medalhas-container">
                <div class="medalha" id="medalha1">
                    <i class="fas fa-medal"></i>
                    <span>1 dia</span>
                </div>
                <div class="medalha" id="medalha3">
                    <i class="fas fa-medal"></i>
                    <span>3 dias</span>
                </div>
                <div class="medalha" id="medalha7">
                    <i class="fas fa-medal"></i>
                    <span>7 dias</span>
                </div>
                <div class="medalha" id="medalha30">
                    <i class="fas fa-medal"></i>
                    <span>30 dias</span>
                </div>
            </div>
        </div>

        <!-- Bot√£o principal de registro -->
        <div class="botao-principal-container">
            <button class="botao-principal" onclick="mostrarRegistro()">
                <i class="fas fa-plus"></i>
                Registrar Gasto
            </button>
        </div>

        <!-- Gastos de hoje -->
        <div class="gastos-hoje">
            <h3><i class="fas fa-list"></i> Gastos de Hoje</h3>
            <div class="lista-gastos" id="listaGastos">
                <!-- Gastos ser√£o carregados aqui -->
            </div>
        </div>

        <!-- Calend√°rio resumido -->
        <div class="calendario-resumo">
            <h3><i class="fas fa-calendar"></i> Calend√°rio</h3>
            <div class="dias-mes" id="calendarioDias">
                <!-- Dias do m√™s ser√£o carregados aqui -->
            </div>
        </div>
    </div>

    <!-- Tela de registro de gasto -->
    <div class="tela-formulario" id="telaRegistro" style="display: none;">
        <div class="formulario-cabecalho">
            <button class="btn-voltar" onclick="voltarPrincipal()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h2>Registrar Gasto</h2>
        </div>

        <form id="formRegistro" onsubmit="registrarGasto(event)">
            <!-- Categoria -->
            <div class="input-group">
                <label><i class="fas fa-tag"></i> Categoria</label>
                <div class="categorias-grid">
                    <button type="button" class="categoria-btn" data-categoria="padaria" onclick="selecionarCategoria('padaria')">
                        <i class="fas fa-bread-slice"></i> Padaria
                    </button>
                    <button type="button" class="categoria-btn" data-categoria="compras" onclick="selecionarCategoria('compras')">
                        <i class="fas fa-shopping-bag"></i> Compras
                    </button>
                    <button type="button" class="categoria-btn" data-categoria="gasolina" onclick="selecionarCategoria('gasolina')">
                        <i class="fas fa-gas-pump"></i> Gasolina
                    </button>
                    <button type="button" class="categoria-btn" data-categoria="farmacia" onclick="selecionarCategoria('farmacia')">
                        <i class="fas fa-pills"></i> Farm√°cia
                    </button>
                    <button type="button" class="categoria-btn" data-categoria="bares" onclick="selecionarCategoria('bares')">
                        <i class="fas fa-beer"></i> Bares
                    </button>
                    <button type="button" class="categoria-btn" data-categoria="ifood" onclick="selecionarCategoria('ifood')">
                        <i class="fas fa-hamburger"></i> iFood
                    </button>
                    <button type="button" class="categoria-btn" data-categoria="uber" onclick="selecionarCategoria('uber')">
                        <i class="fas fa-taxi"></i> Uber
                    </button>
                    <button type="button" class="categoria-btn" data-categoria="outros" onclick="selecionarCategoria('outros')">
                        <i class="fas fa-ellipsis-h"></i> Outros
                    </button>
                </div>
                <input type="hidden" id="categoriaSelecionada" required>
            </div>

            <!-- Valor -->
            <div class="input-group">
                <label><i class="fas fa-money-bill-wave"></i> Valor (R$)</label>
                <input type="number" id="valorGasto" step="0.01" min="0" placeholder="0,00" required>
            </div>

            <!-- Descri√ß√£o -->
            <div class="input-group">
                <label><i class="fas fa-align-left"></i> Descri√ß√£o</label>
                <input type="text" id="descricaoGasto" placeholder="O que voc√™ comprou?" required>
            </div>

            <!-- Forma de pagamento -->
            <div class="input-group">
                <label><i class="fas fa-credit-card"></i> Forma de Pagamento</label>
                <div class="pagamento-opcoes">
                    <label class="pagamento-option">
                        <input type="radio" name="pagamento" value="dinheiro" required>
                        <i class="fas fa-money-bill"></i> Dinheiro
                    </label>
                    <label class="pagamento-option">
                        <input type="radio" name="pagamento" value="pix">
                        <i class="fas fa-qrcode"></i> Pix
                    </label>
                    <label class="pagamento-option">
                        <input type="radio" name="pagamento" value="cartao">
                        <i class="fas fa-credit-card"></i> Cart√£o
                    </label>
                </div>
            </div>

            <button type="submit" class="btn-registrar">
                <i class="fas fa-save"></i> Registrar Gasto
            </button>
        </form>
    </div>

    <!-- Tela de relat√≥rio -->
    <div class="tela-formulario" id="telaRelatorio" style="display: none;">
        <div class="formulario-cabecalho">
            <button class="btn-voltar" onclick="voltarPrincipal()">
                <i class="fas fa-arrow-left"></i>
            </button>
            <h2>Relat√≥rio Di√°rio</h2>
        </div>

        <div class="relatorio-container">
            <div class="data-seletor">
                <button onclick="mudarDataRelatorio(-1)"><i class="fas fa-chevron-left"></i></button>
                <h3 id="dataRelatorio">Hoje</h3>
                <button onclick="mudarDataRelatorio(1)"><i class="fas fa-chevron-right"></i></button>
            </div>

            <div class="resumo-relatorio">
                <div class="resumo-item">
                    <span>Total Gasto:</span>
                    <span id="totalRelatorio">R$ 0,00</span>
                </div>
                <div class="resumo-item">
                    <span>Categoria Mais Gasta:</span>
                    <span id="categoriaRelatorio">-</span>
                </div>
                <div class="resumo-item">
                    <span>Forma de Pagamento:</span>
                    <span id="pagamentoRelatorio">-</span>
                </div>
            </div>

            <div class="gastos-relatorio" id="listaRelatorio">
                <!-- Gastos do relat√≥rio ser√£o carregados aqui -->
            </div>

            <button class="btn-compartilhar" onclick="compartilharRelatorio()">
                <i class="fas fa-share-alt"></i> Compartilhar Relat√≥rio
            </button>
        </div>
    </div>

    <!-- Menu inferior -->
    <nav class="menu-inferior">
        <button class="menu-item ativo" onclick="mostrarTela('principal')">
            <i class="fas fa-home"></i>
            In√≠cio
        </button>
        <button class="menu-item" onclick="mostrarRegistro()">
            <i class="fas fa-plus-circle"></i>
            Registrar
        </button>
        <button class="menu-item" onclick="mostrarRelatorio()">
            <i class="fas fa-chart-pie"></i>
            Relat√≥rio
        </button>
        <button class="menu-item" onclick="mostrarCalendario()">
            <i class="fas fa-calendar-alt"></i>
            Calend√°rio
        </button>
    </nav>

    <!-- Scripts -->
    <script src="app.js"></script>
    <script>
        // Registrar Service Worker para PWA
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('service-worker.js')
                    .then(registration => {
                        console.log('Service Worker registrado com sucesso:', registration);
                    })
                    .catch(error => {
                        console.log('Falha ao registrar Service Worker:', error);
                    });
            });
        }
    </script>
</body>
</html>